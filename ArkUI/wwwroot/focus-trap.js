var c=new Map,d=['a[href]:not([disabled]):not([tabindex="-1"])','button:not([disabled]):not([tabindex="-1"])','input:not([disabled]):not([tabindex="-1"])','select:not([disabled]):not([tabindex="-1"])','textarea:not([disabled]):not([tabindex="-1"])','[tabindex]:not([tabindex="-1"]):not([disabled])','[contenteditable="true"]:not([disabled])'].join(", ");function s(t){return Array.from(t.querySelectorAll(d)).filter(o=>o.offsetParent!==null&&getComputedStyle(o).visibility!=="hidden")}function m(t,e={}){if(!t)return null;let o=`trap-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,i={autoFocus:e.autoFocus!==!1,returnFocus:e.returnFocus!==!1,initialFocus:e.initialFocus||null,returnFocusTo:e.returnFocusTo||document.activeElement};function f(n){if(n.key!=="Tab")return;let u=s(t);if(u.length===0){n.preventDefault();return}let a=u[0],l=u[u.length-1];n.shiftKey?(document.activeElement===a||!t.contains(document.activeElement))&&(n.preventDefault(),l.focus()):(document.activeElement===l||!t.contains(document.activeElement))&&(n.preventDefault(),a.focus())}function r(n){if(!t.contains(n.target)){n.preventDefault(),n.stopPropagation();let u=s(t);u.length>0?u[0].focus():t.focus()}}return t.addEventListener("keydown",f),document.addEventListener("focusin",r,!0),c.set(o,{container:t,config:i,cleanup:()=>{t.removeEventListener("keydown",f),document.removeEventListener("focusin",r,!0)}}),i.autoFocus&&requestAnimationFrame(()=>{if(i.initialFocus&&t.contains(i.initialFocus))i.initialFocus.focus();else{let n=s(t);n.length>0?n[0].focus():(t.hasAttribute("tabindex")||t.setAttribute("tabindex","-1"),t.focus())}}),o}function b(t){let e=c.get(t);e&&(e.cleanup(),e.config.returnFocus&&e.config.returnFocusTo&&requestAnimationFrame(()=>{e.config.returnFocusTo&&typeof e.config.returnFocusTo.focus=="function"&&e.config.returnFocusTo.focus()}),c.delete(t))}function F(t){for(let[e,o]of c)if(o.container===t){b(e);return}}function p(t){if(!t)return;let e=s(t);e.length>0&&e[0].focus()}function g(t){if(!t)return;let e=s(t);e.length>0&&e[e.length-1].focus()}function x(t){t?.focus()}function h(t){return t?t.matches(d)&&t.offsetParent!==null&&getComputedStyle(t).visibility!=="hidden":!1}function v(t){return t?s(t).length:0}export{m as activate,b as deactivate,F as deactivateByContainer,x as focusElement,p as focusFirst,g as focusLast,v as getFocusableCount,h as isFocusable};
