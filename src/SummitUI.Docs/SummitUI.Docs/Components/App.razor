<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <base href="/"/>
    <link rel="icon" type="image/svg+xml" href="/Logo.svg"/>
    <ResourcePreloader/>
    <link rel="stylesheet" href="@Assets["app.css"]"/>
    <link rel="stylesheet" href="@Assets["hljs-a11y-light.min.css"]" media="(prefers-color-scheme: light)"/>
    <link rel="stylesheet" href="@Assets["hljs-a11y-dark.min.css"]" media="(prefers-color-scheme: dark)"/>
    <ImportMap/>
    <HeadOutlet/>
</head>

<body>
<Routes/>
<script src="@Assets["_framework/blazor.web.js"]"></script>
<script src="@Assets["_content/SummitUI/summitui.js"]" type="module"></script>
<script src="@Assets["hljs.bundle.min.js"]"></script>
<script>
    // Initialize highlight.js with MutationObserver for Blazor compatibility
    function initHighlighting() {
        document.querySelectorAll('pre code:not(.hljs)').forEach((block) => {
            hljs.highlightElement(block);
        });
    }

    // Watch for dynamically added code blocks (Blazor renders after page load)
    const observer = new MutationObserver((mutations) => {
        for (const mutation of mutations) {
            for (const node of mutation.addedNodes) {
                if (node.nodeType === Node.ELEMENT_NODE) {
                    // Check if the node itself is a code block
                    if (node.matches?.('pre code:not(.hljs)')) {
                        hljs.highlightElement(node);
                    }
                    // Check for code blocks within the added node
                    node.querySelectorAll?.('pre code:not(.hljs)').forEach((block) => {
                        hljs.highlightElement(block);
                    });
                }
            }
        }
    });

    // Start observing when document is ready
    document.addEventListener('DOMContentLoaded', () => {
        initHighlighting();
        observer.observe(document.body, { childList: true, subtree: true });
    });

    // Also run after Blazor enhanced navigation
    Blazor.addEventListener('enhancedload', initHighlighting);
</script>
</body>

</html>