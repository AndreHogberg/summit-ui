@page "/docs/focustrap"
@layout DocsLayout
@rendermode InteractiveWebAssembly
<PageTitle>SummitUI - FocusTrap</PageTitle>

<SuBadge Variant="SuBadgeVariant.Outline">Utility</SuBadge>
<SuHeading Level="SuHeadingLevel.H1" class="flex flex-row items-center gap-4">
    FocusTrap
    <SuPromptButton ComponentName="FocusTrap" />
</SuHeading>
<SuText Lead="true" Muted="true">
    A utility component that traps keyboard focus within its children, preventing focus from escaping to elements outside the trap.
</SuText>

<SuSection Title="Demo">
    <SuCard>
        <div class="flex flex-col gap-4">
            <SuButton @onclick="@(() => showDialog = true)">
                Open Dialog
            </SuButton>
            
            @if (showDialog)
            {
                <div class="demo-overlay" @onclick="@(() => showDialog = false)">
                    <FocusTrap IsActive="true" AutoFocus="true" ReturnFocus="true">
                        <SuCard class="max-w-[400px] w-[90%]" role="dialog" aria-modal="true" aria-labelledby="demo-dialog-title" @onclick:stopPropagation="true">
                            <SuHeading Level="SuHeadingLevel.H3" id="demo-dialog-title">Focus Trap Demo</SuHeading>
                            <SuText Size="SuTextSize.Small" Muted="true" class="mt-2">
                                Try pressing Tab to navigate. Focus will cycle through the elements below and won't escape to the page behind.
                            </SuText>
                            <div class="flex flex-col gap-3 mt-4">
                                <input type="text" placeholder="First input" class="demo-input" />
                                <input type="text" placeholder="Second input" class="demo-input" />
                            </div>
                            <div class="flex gap-3 mt-4 justify-end">
                                <SuButton Variant="SuButtonVariant.Outline" @onclick="@(() => showDialog = false)">
                                    Cancel
                                </SuButton>
                                <SuButton @onclick="@(() => showDialog = false)">
                                    Confirm
                                </SuButton>
                            </div>
                        </SuCard>
                    </FocusTrap>
                </div>
            }
        </div>
    </SuCard>
</SuSection>

<SuSection Title="Features">
    <ul class="grid gap-2 text-sm text-su-muted-foreground">
        <li class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-foreground"><path d="M20 6 9 17l-5-5"/></svg>
            Traps Tab and Shift+Tab navigation within boundaries
        </li>
        <li class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-foreground"><path d="M20 6 9 17l-5-5"/></svg>
            Automatic focus on activation
        </li>
        <li class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-foreground"><path d="M20 6 9 17l-5-5"/></svg>
            Returns focus on deactivation
        </li>
        <li class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-foreground"><path d="M20 6 9 17l-5-5"/></svg>
            Handles edge cases (no focusable elements)
        </li>
        <li class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-foreground"><path d="M20 6 9 17l-5-5"/></svg>
            Programmatic focus control methods
        </li>
        <li class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-foreground"><path d="M20 6 9 17l-5-5"/></svg>
            Activation/deactivation callbacks
        </li>
    </ul>
</SuSection>

<SuSection Title="Installation">
    <SuCodeBlock Language="bash" Code="dotnet add package SummitUI" />
</SuSection>

<SuSection Title="Anatomy" Description="Import the component and wrap your content:">
    <SuCodeBlock Language="xml" Code="@anatomyCode" />
</SuSection>

<SuSection Title="API Reference">
    <SuHeading Level="SuHeadingLevel.H3" class="border-b border-su-border pb-2">FocusTrap</SuHeading>
    <SuText Size="SuTextSize.Small" Muted="true">The focus trap container component.</SuText>
    <SuTable>
        <SuTableHeader>
            <SuTableRow>
                <SuTableHead>Prop</SuTableHead>
                <SuTableHead>Type</SuTableHead>
                <SuTableHead>Default</SuTableHead>
                <SuTableHead>Description</SuTableHead>
            </SuTableRow>
        </SuTableHeader>
        <SuTableBody>
            @foreach (var prop in focusTrapProps)
            {
                <SuTableRow>
                    <SuTableCell><SuCode>@prop.Name</SuCode></SuTableCell>
                    <SuTableCell><SuCode>@prop.Type</SuCode></SuTableCell>
                    <SuTableCell>@(prop.Default ?? "-")</SuTableCell>
                    <SuTableCell>@prop.Description</SuTableCell>
                </SuTableRow>
            }
        </SuTableBody>
    </SuTable>

    <SuHeading Level="SuHeadingLevel.H3" class="border-b border-su-border pb-2 mt-8">Public Methods</SuHeading>
    <SuText Size="SuTextSize.Small" Muted="true">Methods available via component reference.</SuText>
    <SuTable>
        <SuTableHeader>
            <SuTableRow>
                <SuTableHead>Method</SuTableHead>
                <SuTableHead>Returns</SuTableHead>
                <SuTableHead>Description</SuTableHead>
            </SuTableRow>
        </SuTableHeader>
        <SuTableBody>
            <SuTableRow>
                <SuTableCell><SuCode>FocusFirstAsync()</SuCode></SuTableCell>
                <SuTableCell><SuCode>ValueTask</SuCode></SuTableCell>
                <SuTableCell>Manually focus the first focusable element</SuTableCell>
            </SuTableRow>
            <SuTableRow>
                <SuTableCell><SuCode>FocusLastAsync()</SuCode></SuTableCell>
                <SuTableCell><SuCode>ValueTask</SuCode></SuTableCell>
                <SuTableCell>Manually focus the last focusable element</SuTableCell>
            </SuTableRow>
        </SuTableBody>
    </SuTable>
</SuSection>

<SuSection Title="How It Works">
    <SuHeading Level="SuHeadingLevel.H3">Focus Trapping Mechanism</SuHeading>
    <ol class="grid gap-2 text-sm text-su-muted-foreground list-decimal list-inside my-4">
        <li>When activated, the component identifies all focusable elements within its boundaries</li>
        <li>It intercepts Tab and Shift+Tab key presses</li>
        <li>When Tab is pressed on the last focusable element, focus moves to the first</li>
        <li>When Shift+Tab is pressed on the first focusable element, focus moves to the last</li>
        <li>This creates a circular focus loop within the trapped area</li>
    </ol>

    <SuHeading Level="SuHeadingLevel.H3" class="mt-8">Focusable Elements</SuHeading>
    <SuText Size="SuTextSize.Small" Muted="true" class="mb-4">The following elements are considered focusable:</SuText>
    <ul class="grid gap-2 text-sm text-su-muted-foreground">
        <li class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-foreground"><path d="M20 6 9 17l-5-5"/></svg>
            <SuCode>&lt;a&gt;</SuCode> with <SuCode>href</SuCode> attribute
        </li>
        <li class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-foreground"><path d="M20 6 9 17l-5-5"/></svg>
            <SuCode>&lt;button&gt;</SuCode> (not disabled)
        </li>
        <li class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-foreground"><path d="M20 6 9 17l-5-5"/></svg>
            <SuCode>&lt;input&gt;</SuCode> (not disabled, not <SuCode>type="hidden"</SuCode>)
        </li>
        <li class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-foreground"><path d="M20 6 9 17l-5-5"/></svg>
            <SuCode>&lt;select&gt;</SuCode> (not disabled)
        </li>
        <li class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-foreground"><path d="M20 6 9 17l-5-5"/></svg>
            <SuCode>&lt;textarea&gt;</SuCode> (not disabled)
        </li>
        <li class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-foreground"><path d="M20 6 9 17l-5-5"/></svg>
            Elements with <SuCode>tabindex</SuCode> >= 0
        </li>
        <li class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-foreground"><path d="M20 6 9 17l-5-5"/></svg>
            Elements with <SuCode>contenteditable</SuCode>
        </li>
    </ul>

    <SuHeading Level="SuHeadingLevel.H3" class="mt-8">Edge Cases</SuHeading>
    <ul class="grid gap-2 text-sm text-su-muted-foreground mt-4">
        <li class="flex items-start gap-2">
            <SuText class="font-medium shrink-0">No focusable elements:</SuText>
            <SuText>If there are no focusable elements, the trap container itself receives focus (if it has <SuCode>tabindex="-1"</SuCode>)</SuText>
        </li>
        <li class="flex items-start gap-2">
            <SuText class="font-medium shrink-0">Single focusable element:</SuText>
            <SuText>Focus stays on that element</SuText>
        </li>
        <li class="flex items-start gap-2">
            <SuText class="font-medium shrink-0">Dynamically added elements:</SuText>
            <SuText>New focusable elements are automatically included in the trap</SuText>
        </li>
    </ul>
</SuSection>

<SuSection Title="Examples">
    <SuHeading Level="SuHeadingLevel.H3">Basic Dialog</SuHeading>
    <SuCodeBlock Language="razor" Code="@basicDialogCode" />

    <SuHeading Level="SuHeadingLevel.H3" class="mt-8">Modal Form</SuHeading>
    <SuText Size="SuTextSize.Small" Muted="true" class="mb-4">A form inside a modal with focus trapping.</SuText>
    <SuCodeBlock Language="razor" Code="@modalFormCode" />

    <SuHeading Level="SuHeadingLevel.H3" class="mt-8">Controlled Activation</SuHeading>
    <SuText Size="SuTextSize.Small" Muted="true" class="mb-4">Toggle the focus trap on and off.</SuText>
    <SuCodeBlock Language="razor" Code="@controlledCode" />

    <SuHeading Level="SuHeadingLevel.H3" class="mt-8">Programmatic Focus Control</SuHeading>
    <SuText Size="SuTextSize.Small" Muted="true" class="mb-4">Manually focus the first or last element.</SuText>
    <SuCodeBlock Language="razor" Code="@programmaticCode" />

    <SuHeading Level="SuHeadingLevel.H3" class="mt-8">Sidebar Navigation</SuHeading>
    <SuText Size="SuTextSize.Small" Muted="true" class="mb-4">A mobile sidebar with focus trapping.</SuText>
    <SuCodeBlock Language="razor" Code="@sidebarCode" />

    <SuHeading Level="SuHeadingLevel.H3" class="mt-8">Nested Focus Traps</SuHeading>
    <SuText Size="SuTextSize.Small" Muted="true" class="mb-4">Handle nested dialogs with multiple focus traps.</SuText>
    <SuCodeBlock Language="razor" Code="@nestedCode" />
</SuSection>

<SuSection Title="Common Use Cases">
    <SuTable>
        <SuTableHeader>
            <SuTableRow>
                <SuTableHead>Use Case</SuTableHead>
                <SuTableHead>Configuration</SuTableHead>
            </SuTableRow>
        </SuTableHeader>
        <SuTableBody>
            <SuTableRow>
                <SuTableCell>Modal dialog</SuTableCell>
                <SuTableCell><SuCode>IsActive="true" AutoFocus="true" ReturnFocus="true"</SuCode></SuTableCell>
            </SuTableRow>
            <SuTableRow>
                <SuTableCell>Dropdown menu</SuTableCell>
                <SuTableCell><SuCode>IsActive="@@isOpen" AutoFocus="true" ReturnFocus="true"</SuCode></SuTableCell>
            </SuTableRow>
            <SuTableRow>
                <SuTableCell>Sidebar navigation</SuTableCell>
                <SuTableCell><SuCode>IsActive="@@isOpen" AutoFocus="true" ReturnFocus="true"</SuCode></SuTableCell>
            </SuTableRow>
            <SuTableRow>
                <SuTableCell>Inline editor</SuTableCell>
                <SuTableCell><SuCode>IsActive="@@isEditing" AutoFocus="true" ReturnFocus="true"</SuCode></SuTableCell>
            </SuTableRow>
            <SuTableRow>
                <SuTableCell>Toast/notification</SuTableCell>
                <SuTableCell><SuCode>IsActive="false"</SuCode> (usually not needed)</SuTableCell>
            </SuTableRow>
        </SuTableBody>
    </SuTable>
</SuSection>

<SuSection Title="Styling">
    <SuHeading Level="SuHeadingLevel.H3">CSS Example</SuHeading>
    <SuText Size="SuTextSize.Small" Muted="true" class="mb-4">Common styles for dialogs and overlays used with FocusTrap:</SuText>
    <SuCodeBlock Language="css" Code="@cssExampleCode" />
</SuSection>

<SuSection Title="Accessibility">
    <SuHeading Level="SuHeadingLevel.H3">Best Practices</SuHeading>
    <ul class="grid gap-2 text-sm text-su-muted-foreground my-4">
        <li class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-foreground"><path d="M20 6 9 17l-5-5"/></svg>
            <SuText class="inline"><SuText class="font-medium inline">Always use with modals/dialogs:</SuText> Focus trapping is essential for modal accessibility</SuText>
        </li>
        <li class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-foreground"><path d="M20 6 9 17l-5-5"/></svg>
            <SuText class="inline"><SuText class="font-medium inline">Provide an escape route:</SuText> Always include a way to close/deactivate the trap (close button, Escape key)</SuText>
        </li>
        <li class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-foreground"><path d="M20 6 9 17l-5-5"/></svg>
            <SuText class="inline"><SuText class="font-medium inline">Use with <SuCode>role="dialog"</SuCode>:</SuText> Combine with proper ARIA roles for screen readers</SuText>
        </li>
        <li class="flex items-center gap-2">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-foreground"><path d="M20 6 9 17l-5-5"/></svg>
            <SuText class="inline"><SuText class="font-medium inline">Return focus:</SuText> Keep <SuCode>ReturnFocus</SuCode> enabled to maintain user context</SuText>
        </li>
    </ul>

    <SuHeading Level="SuHeadingLevel.H3" class="mt-8">Screen Reader Considerations</SuHeading>
    <ul class="grid gap-2 text-sm text-su-muted-foreground mt-4">
        <li class="flex items-start gap-2">
            <span class="shrink-0">-</span>
            <SuText>The focus trap should be used in conjunction with <SuCode>aria-modal="true"</SuCode> for dialogs</SuText>
        </li>
        <li class="flex items-start gap-2">
            <span class="shrink-0">-</span>
            <SuText>Include <SuCode>aria-labelledby</SuCode> or <SuCode>aria-label</SuCode> on the dialog container</SuText>
        </li>
        <li class="flex items-start gap-2">
            <span class="shrink-0">-</span>
            <SuText>Announce the dialog opening/closing to screen readers if needed</SuText>
        </li>
    </ul>

    <SuHeading Level="SuHeadingLevel.H3" class="mt-8">Accessible Dialog Example</SuHeading>
    <SuCodeBlock Language="xml" Code="@accessibleDialogCode" />
</SuSection>

<style>
    .demo-overlay {
        position: fixed;
        inset: 0;
        background: rgb(var(--su-foreground) / 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
    }
    
    .demo-input {
        width: 100%;
        padding: 0.5rem 0.75rem;
        background: rgb(var(--su-background));
        border: 1px solid rgb(var(--su-border));
        border-radius: 0.5rem;
        color: rgb(var(--su-foreground));
        font-size: 0.875rem;
    }
    
    .demo-input:focus {
        outline: none;
        border-color: rgb(var(--su-primary));
        box-shadow: 0 0 0 2px rgb(var(--su-primary) / 0.2);
    }
    
    .demo-input::placeholder {
        color: rgb(var(--su-muted-foreground));
    }
</style>

@code {
    private bool showDialog = false;

    private readonly List<SuApiProperty> focusTrapProps = new()
    {
        new() { Name = "ChildContent", Type = "RenderFragment?", Default = "null", Description = "Content to render within the trap" },
        new() { Name = "IsActive", Type = "bool", Default = "true", Description = "Whether trap is active" },
        new() { Name = "AutoFocus", Type = "bool", Default = "true", Description = "Auto-focus first element when activated" },
        new() { Name = "ReturnFocus", Type = "bool", Default = "true", Description = "Return focus to previously focused element on deactivation" },
        new() { Name = "OnActivated", Type = "EventCallback", Description = "Callback when trap activates" },
        new() { Name = "OnDeactivated", Type = "EventCallback", Description = "Callback when trap deactivates" }
    };

    private const string anatomyCode = @"@using SummitUI.Components.Utilities

<FocusTrap IsActive=""true"">
    <div class=""su-trap-container"">
        <input type=""text"" class=""su-input"" />
        <button class=""su-button"">Submit</button>
    </div>
</FocusTrap>";

    private const string basicDialogCode = @"@code {
    private bool showDialog = false;
}

@if (showDialog)
{
    <div class=""su-dialog-overlay"">
        <FocusTrap IsActive=""true"" AutoFocus=""true"">
            <div class=""su-dialog"" role=""dialog"" aria-modal=""true"" aria-labelledby=""dialog-title"">
                <h2 id=""dialog-title"" class=""su-dialog-title"">Confirm Action</h2>
                <p class=""su-dialog-description"">Are you sure you want to proceed?</p>
                <div class=""su-dialog-actions"">
                    <button class=""su-button su-button-secondary"" @onclick=""@(() => showDialog = false)"">Cancel</button>
                    <button class=""su-button"" @onclick=""HandleConfirm"">Confirm</button>
                </div>
            </div>
        </FocusTrap>
    </div>
}

<button class=""su-button"" @onclick=""@(() => showDialog = true)"">Open Dialog</button>

@code {
    private void HandleConfirm()
    {
        // Handle confirmation
        showDialog = false;
    }
}";

    private const string modalFormCode = @"@code {
    private bool showModal = false;
    private string name = """";
    private string email = """";
}

@if (showModal)
{
    <div class=""su-modal-overlay"" @onclick=""@(() => showModal = false)"">
        <FocusTrap IsActive=""true"" AutoFocus=""true"" ReturnFocus=""true"">
            <div class=""su-modal"" @onclick:stopPropagation=""true"" role=""dialog"" aria-modal=""true"">
                <h2 class=""su-modal-title"">Sign Up</h2>
                <form @onsubmit=""HandleSubmit"" class=""su-form"">
                    <div class=""su-form-field"">
                        <label for=""name"" class=""su-label"">Name</label>
                        <input type=""text"" id=""name"" @bind=""name"" class=""su-input"" required />
                    </div>
                    <div class=""su-form-field"">
                        <label for=""email"" class=""su-label"">Email</label>
                        <input type=""email"" id=""email"" @bind=""email"" class=""su-input"" required />
                    </div>
                    <div class=""su-form-actions"">
                        <button type=""button"" class=""su-button su-button-secondary"" @onclick=""@(() => showModal = false)"">
                            Cancel
                        </button>
                        <button type=""submit"" class=""su-button"">Submit</button>
                    </div>
                </form>
            </div>
        </FocusTrap>
    </div>
}

<button class=""su-button"" @onclick=""@(() => showModal = true)"">Open Sign Up</button>";

    private const string controlledCode = @"@code {
    private bool isTrapActive = false;
}

<div class=""su-control-panel"">
    <button class=""su-button"" @onclick=""@(() => isTrapActive = !isTrapActive)"">
        @(isTrapActive ? ""Deactivate"" : ""Activate"") Focus Trap
    </button>
</div>

<FocusTrap IsActive=""@isTrapActive"" 
           OnActivated=""HandleActivated"" 
           OnDeactivated=""HandleDeactivated"">
    <div class=""su-trap-container"">
        <h3 class=""su-trap-title"">Focus Trap Area</h3>
        <input type=""text"" class=""su-input"" placeholder=""First input"" />
        <input type=""text"" class=""su-input"" placeholder=""Second input"" />
        <button class=""su-button"">Action Button</button>
    </div>
</FocusTrap>

@code {
    private void HandleActivated()
    {
        Console.WriteLine(""Focus trap activated"");
    }
    
    private void HandleDeactivated()
    {
        Console.WriteLine(""Focus trap deactivated"");
    }
}";

    private const string programmaticCode = @"@code {
    private FocusTrap? focusTrap;
}

<FocusTrap @ref=""focusTrap"" IsActive=""true"" AutoFocus=""false"">
    <div class=""su-trap-container"">
        <input type=""text"" class=""su-input"" placeholder=""First"" />
        <input type=""text"" class=""su-input"" placeholder=""Middle"" />
        <input type=""text"" class=""su-input"" placeholder=""Last"" />
    </div>
</FocusTrap>

<div class=""su-controls"">
    <button class=""su-button"" @onclick=""FocusFirst"">Focus First</button>
    <button class=""su-button"" @onclick=""FocusLast"">Focus Last</button>
</div>

@code {
    private async Task FocusFirst()
    {
        if (focusTrap != null)
        {
            await focusTrap.FocusFirstAsync();
        }
    }
    
    private async Task FocusLast()
    {
        if (focusTrap != null)
        {
            await focusTrap.FocusLastAsync();
        }
    }
}";

    private const string sidebarCode = @"@code {
    private bool sidebarOpen = false;
}

<button class=""su-button"" @onclick=""@(() => sidebarOpen = true)"" aria-expanded=""@sidebarOpen"">
    Open Menu
</button>

@if (sidebarOpen)
{
    <div class=""su-sidebar-overlay"" @onclick=""@(() => sidebarOpen = false)"">
        <FocusTrap IsActive=""true"" AutoFocus=""true"" ReturnFocus=""true"">
            <nav class=""su-sidebar"" @onclick:stopPropagation=""true"" role=""navigation"">
                <button class=""su-close-btn"" @onclick=""@(() => sidebarOpen = false)"" 
                        aria-label=""Close menu"">
                    X
                </button>
                <a href=""/home"" class=""su-nav-link"">Home</a>
                <a href=""/about"" class=""su-nav-link"">About</a>
                <a href=""/services"" class=""su-nav-link"">Services</a>
                <a href=""/contact"" class=""su-nav-link"">Contact</a>
            </nav>
        </FocusTrap>
    </div>
}";

    private const string nestedCode = @"@code {
    private bool showInnerDialog = false;
}

<FocusTrap IsActive=""true"">
    <div class=""su-outer-dialog"">
        <h2 class=""su-dialog-title"">Outer Dialog</h2>
        <input type=""text"" class=""su-input"" placeholder=""Outer input"" />
        <button class=""su-button"" @onclick=""@(() => showInnerDialog = true)"">Open Inner</button>
        
        @if (showInnerDialog)
        {
            <FocusTrap IsActive=""true"" AutoFocus=""true"">
                <div class=""su-inner-dialog"">
                    <h3 class=""su-dialog-title"">Inner Dialog</h3>
                    <input type=""text"" class=""su-input"" placeholder=""Inner input"" />
                    <button class=""su-button"" @onclick=""@(() => showInnerDialog = false)"">Close</button>
                </div>
            </FocusTrap>
        }
    </div>
</FocusTrap>";

    private const string cssExampleCode = @".su-dialog-overlay {
    position: fixed;
    inset: 0;
    background: rgb(var(--su-foreground) / 0.5);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
}

.su-dialog {
    background: rgb(var(--su-card));
    padding: 24px;
    border-radius: 8px;
    border: 1px solid rgb(var(--su-border));
    box-shadow: 0 4px 20px rgb(var(--su-foreground) / 0.2);
    max-width: 400px;
    width: 100%;
}

.su-dialog-title {
    margin-top: 0;
    color: rgb(var(--su-foreground));
    font-weight: 600;
}

.su-dialog-actions {
    display: flex;
    gap: 12px;
    justify-content: flex-end;
    margin-top: 24px;
}

.su-trap-container {
    border: 2px solid rgb(var(--su-primary));
    padding: 20px;
    border-radius: 8px;
}

.su-trap-container[data-focus-trap-active=""true""] {
    border-color: rgb(var(--su-primary));
}";

    private const string accessibleDialogCode = @"<FocusTrap IsActive=""true"" AutoFocus=""true"" ReturnFocus=""true"">
    <div role=""dialog"" 
         class=""su-dialog""
         aria-modal=""true"" 
         aria-labelledby=""dialog-title""
         aria-describedby=""dialog-description"">
        <h2 id=""dialog-title"" class=""su-dialog-title"">Delete Item</h2>
        <p id=""dialog-description"" class=""su-dialog-description"">
            Are you sure you want to delete this item? This action cannot be undone.
        </p>
        <button class=""su-button su-button-secondary"" @onclick=""Cancel"">Cancel</button>
        <button class=""su-button su-button-destructive"" @onclick=""Delete"">Delete</button>
    </div>
</FocusTrap>";
}
