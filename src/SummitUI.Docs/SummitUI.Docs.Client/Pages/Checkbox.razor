@page "/docs/checkbox"
@rendermode InteractiveWebAssembly
@layout DocsLayout
@using SummitUI

<PageTitle>SummitUI - Checkbox</PageTitle>

<div class="flex flex-col gap-12">
    @* Header *@
    <div class="flex flex-col gap-4">
        <div>
            <SuBadge Variant="SuBadgeVariant.Outline">Component</SuBadge>
        </div>
        <SuHeading Level="SuHeadingLevel.H1" class="flex flex-row items-center gap-4">
            Checkbox
            <SuPromptButton ComponentName="Checkbox" Url="/docs/checkbox" />
        </SuHeading>
        <SuText Lead="true" Muted="true">
            A control that allows the user to toggle between checked and not checked.
        </SuText>
    </div>

    @* Live Demo *@
    <SuSection Title="Demo">
        <SuCard>
            <div class="flex flex-col gap-4">
                <label class="flex items-center gap-3 cursor-pointer">
                    <SmCheckboxRoot @bind-Checked="isChecked1" AriaLabel="Accept terms and conditions" class="demo-checkbox">
                        <SmCheckboxIndicator class="demo-indicator">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M20 6 9 17l-5-5"/>
                            </svg>
                        </SmCheckboxIndicator>
                    </SmCheckboxRoot>
                    <span class="text-sm text-su-foreground">Accept terms and conditions</span>
                </label>
                
                <label class="flex items-center gap-3 cursor-pointer">
                    <SmCheckboxRoot @bind-Checked="isChecked2" AriaLabel="Subscribe to newsletter" class="demo-checkbox">
                        <SmCheckboxIndicator class="demo-indicator">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M20 6 9 17l-5-5"/>
                            </svg>
                        </SmCheckboxIndicator>
                    </SmCheckboxRoot>
                    <span class="text-sm text-su-foreground">Subscribe to newsletter</span>
                </label>
                
                <label class="flex items-center gap-3 cursor-not-allowed opacity-50">
                    <SmCheckboxRoot Disabled="true" AriaLabel="Disabled option" class="demo-checkbox">
                        <SmCheckboxIndicator class="demo-indicator">
                            <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round">
                                <path d="M20 6 9 17l-5-5"/>
                            </svg>
                        </SmCheckboxIndicator>
                    </SmCheckboxRoot>
                    <span class="text-sm text-su-foreground">Disabled option</span>
                </label>
            </div>
        </SuCard>
    </SuSection>

    @* Features *@
    <SuSection Title="Features">
        <ul class="grid gap-2 text-sm text-su-muted-foreground">
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                Three states: checked, unchecked, and indeterminate
            </li>
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                Keyboard navigation (Space to toggle)
            </li>
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                Controlled and uncontrolled modes
            </li>
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                Support for HTML forms (hidden input)
            </li>
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                Blazor EditForm integration with validation
            </li>
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                Grouping capabilities via CheckboxGroup
            </li>
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                WCAG compliant with proper ARIA attributes
            </li>
        </ul>
    </SuSection>

    @* Installation *@
    <SuSection Title="Installation">
        <SuCodeBlock Code="dotnet add package SummitUI" Language="bash" />
    </SuSection>

    @* Anatomy *@
    <SuSection Title="Anatomy" Description="Import the components and structure them as follows:">
        <SuCodeBlock Code="@anatomyCode" Language="razor" />
    </SuSection>

    @* Sub-components *@
    <SuSection Title="Sub-components">
        <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
            <SuCard>
                <SuCardTitle>CheckboxRoot</SuCardTitle>
                <SuCardDescription class="mt-1">The root checkbox component containing the button element.</SuCardDescription>
            </SuCard>
            <SuCard>
                <SuCardTitle>CheckboxIndicator</SuCardTitle>
                <SuCardDescription class="mt-1">Renders when the checkbox is in a checked or indeterminate state.</SuCardDescription>
            </SuCard>
            <SuCard>
                <SuCardTitle>CheckboxGroup</SuCardTitle>
                <SuCardDescription class="mt-1">A wrapper for managing a group of checkboxes.</SuCardDescription>
            </SuCard>
            <SuCard>
                <SuCardTitle>CheckboxGroupLabel</SuCardTitle>
                <SuCardDescription class="mt-1">Accessible label for the checkbox group.</SuCardDescription>
            </SuCard>
        </div>
    </SuSection>

    @* API Reference *@
    <SuSection Title="API Reference">
        <div class="flex flex-col gap-12">
            @foreach (var table in new[] { 
                (Title: "CheckboxRoot", Props: checkboxRootProperties), 
                (Title: "CheckboxIndicator", Props: checkboxIndicatorProperties),
                (Title: "CheckboxGroup", Props: checkboxGroupProperties),
                (Title: "CheckboxGroupLabel", Props: checkboxGroupLabelProperties)
            })
            {
                <div class="flex flex-col gap-3">
                    <SuHeading Level="SuHeadingLevel.H3">@table.Title</SuHeading>
                    <SuTable>
                        <SuTableHeader>
                            <SuTableRow>
                                <SuTableHead>Property</SuTableHead>
                                <SuTableHead>Type</SuTableHead>
                                <SuTableHead>Default</SuTableHead>
                                <SuTableHead>Description</SuTableHead>
                            </SuTableRow>
                        </SuTableHeader>
                        <SuTableBody>
                            @foreach (var prop in table.Props)
                            {
                                <SuTableRow>
                                    <SuTableCell class="font-mono text-su-primary font-medium">
                                        @prop.Name
                                        @if (prop.Required)
                                        {
                                            <SuBadge Variant="SuBadgeVariant.Destructive" Size="SuSize.Small" class="ml-2">required</SuBadge>
                                        }
                                    </SuTableCell>
                                    <SuTableCell class="font-mono text-su-muted-foreground text-sm">@prop.Type</SuTableCell>
                                    <SuTableCell class="font-mono text-su-muted-foreground text-sm">@(prop.Default ?? "-")</SuTableCell>
                                    <SuTableCell class="text-su-muted-foreground">@(prop.Description ?? "-")</SuTableCell>
                                </SuTableRow>
                            }
                        </SuTableBody>
                    </SuTable>
                </div>
            }
        </div>
    </SuSection>

    @* Examples *@
    <SuSection Title="Examples">
        <div class="flex flex-col gap-8">
            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">Basic Usage</SuHeading>
                <SuCodeBlock Code="@basicExampleCode" Language="razor" />
            </div>

            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">With Label</SuHeading>
                <SuText Size="SuTextSize.Small" Muted="true">Wrap the checkbox in a label for better accessibility and click handling.</SuText>
                <SuCodeBlock Code="@withLabelExampleCode" Language="razor" />
            </div>

            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">Controlled Mode</SuHeading>
                <SuText Size="SuTextSize.Small" Muted="true">Control the checked state externally.</SuText>
                <SuCodeBlock Code="@controlledExampleCode" Language="razor" />
            </div>

            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">Indeterminate State</SuHeading>
                <SuText Size="SuTextSize.Small" Muted="true">Use the indeterminate state for parent checkboxes with partially selected children.</SuText>
                <SuCodeBlock Code="@indeterminateExampleCode" Language="razor" />
            </div>

            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">Checkbox Group</SuHeading>
                <SuText Size="SuTextSize.Small" Muted="true">Manage multiple checkboxes as a group.</SuText>
                <SuCodeBlock Code="@groupExampleCode" Language="razor" />
            </div>

            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">EditForm Integration (Single Checkbox)</SuHeading>
                <SuText Size="SuTextSize.Small" Muted="true">Use with Blazor EditForm for model binding and validation support.</SuText>
                <SuCodeBlock Code="@editFormSingleExampleCode" Language="razor" />
            </div>

            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">EditForm Integration (Checkbox Group)</SuHeading>
                <SuText Size="SuTextSize.Small" Muted="true">Use CheckboxGroup with EditForm for multi-select validation.</SuText>
                <SuCodeBlock Code="@editFormGroupExampleCode" Language="razor" />
            </div>
        </div>
    </SuSection>

    @* Styling *@
    <SuSection Title="Styling">
        <div class="flex flex-col gap-12">
            <div class="flex flex-col gap-3">
                <SuHeading Level="SuHeadingLevel.H3">Data Attributes</SuHeading>
                <SuTable>
                    <SuTableHeader>
                        <SuTableRow>
                            <SuTableHead>Attribute</SuTableHead>
                            <SuTableHead>Values</SuTableHead>
                            <SuTableHead>Description</SuTableHead>
                        </SuTableRow>
                    </SuTableHeader>
                    <SuTableBody>
                        @foreach (var attr in dataAttributes)
                        {
                            <SuTableRow>
                                <SuTableCell class="font-mono text-su-primary font-medium">@attr.Name</SuTableCell>
                                <SuTableCell class="font-mono text-su-muted-foreground text-sm">@attr.Type</SuTableCell>
                                <SuTableCell class="text-su-muted-foreground">@attr.Description</SuTableCell>
                            </SuTableRow>
                        }
                    </SuTableBody>
                </SuTable>
            </div>

            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">CSS Example</SuHeading>
                <SuCodeBlock Code="@cssExampleCode" Language="css" />
            </div>
        </div>
    </SuSection>

    @* Accessibility *@
    <SuSection Title="Accessibility">
        <div class="flex flex-col gap-12">
            <div class="flex flex-col gap-3">
                <SuHeading Level="SuHeadingLevel.H3">Keyboard Navigation</SuHeading>
                <SuTable>
                    <SuTableHeader>
                        <SuTableRow>
                            <SuTableHead>Key</SuTableHead>
                            <SuTableHead>Action</SuTableHead>
                        </SuTableRow>
                    </SuTableHeader>
                    <SuTableBody>
                        @foreach (var nav in keyboardNavigation)
                        {
                            <SuTableRow>
                                <SuTableCell class="font-medium text-su-foreground">@nav.Name</SuTableCell>
                                <SuTableCell class="text-su-muted-foreground">@nav.Description</SuTableCell>
                            </SuTableRow>
                        }
                    </SuTableBody>
                </SuTable>
            </div>

            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">ARIA Attributes</SuHeading>
                <ul class="grid gap-2 text-sm text-su-muted-foreground">
                    <li class="flex items-start gap-2">
                        <span class="text-su-foreground font-medium shrink-0">role:</span>
                        <span><code>checkbox</code> is set on the root element</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="text-su-foreground font-medium shrink-0">aria-checked:</span>
                        <span>Reflects the current state (<code>true</code>, <code>false</code>, or <code>mixed</code>)</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="text-su-foreground font-medium shrink-0">aria-label:</span>
                        <span>Provides an accessible name when set via the <code>AriaLabel</code> parameter</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="text-su-foreground font-medium shrink-0">aria-disabled:</span>
                        <span>Set when the checkbox is disabled</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="text-su-foreground font-medium shrink-0">aria-required:</span>
                        <span>Set when the checkbox is required</span>
                    </li>
                </ul>
            </div>
        </div>
    </SuSection>
</div>

<style>
    /* Demo Checkbox Styles */
    .demo-checkbox {
        width: 1.25rem;
        height: 1.25rem;
        display: flex;
        align-items: center;
        justify-content: center;
        background: transparent;
        border: 2px solid rgb(var(--su-border));
        border-radius: 0.25rem;
        cursor: pointer;
        transition: all 0.15s;
    }
    
    .demo-checkbox:hover {
        border-color: rgb(var(--su-foreground));
    }
    
    .demo-checkbox[data-state="checked"],
    .demo-checkbox[data-state="indeterminate"] {
        background: rgb(var(--su-primary));
        border-color: rgb(var(--su-primary));
    }
    
    .demo-checkbox[data-disabled] {
        opacity: 0.5;
        cursor: not-allowed;
    }
    
    .demo-indicator {
        color: rgb(var(--su-background));
        display: flex;
        align-items: center;
        justify-content: center;
    }
</style>

@code {
    private bool isChecked1 = true;
    private bool isChecked2 = false;

    private List<SuApiProperty> checkboxRootProperties = new()
    {
        new() { Name = "Checked", Type = "bool?", Default = "null", Description = "Controlled checked state" },
        new() { Name = "DefaultChecked", Type = "bool", Default = "false", Description = "Default checked state for uncontrolled mode" },
        new() { Name = "CheckedChanged", Type = "EventCallback<bool>", Description = "Callback when checked state changes" },
        new() { Name = "CheckedExpression", Type = "Expression<Func<bool>>?", Default = "null", Description = "Expression for EditForm binding and validation" },
        new() { Name = "Indeterminate", Type = "bool", Default = "false", Description = "Controlled indeterminate state" },
        new() { Name = "IndeterminateChanged", Type = "EventCallback<bool>", Description = "Callback when indeterminate state changes" },
        new() { Name = "Disabled", Type = "bool", Default = "false", Description = "Prevents interaction with the checkbox" },
        new() { Name = "Required", Type = "bool", Default = "false", Description = "Indicates checkbox must be checked for form submission" },
        new() { Name = "Name", Type = "string?", Default = "null", Description = "Form field name for hidden input" },
        new() { Name = "Value", Type = "string?", Default = "\"on\"", Description = "Value submitted with form data" },
        new() { Name = "AriaLabel", Type = "string?", Default = "null", Description = "Accessible label for the checkbox when not wrapped in a label element" }
    };

    private List<SuApiProperty> checkboxIndicatorProperties = new()
    {
        new() { Name = "ForceMount", Type = "bool", Default = "false", Description = "Always render in DOM (useful for CSS animations)" },
        new() { Name = "ChildContent", Type = "RenderFragment?", Description = "Content to render when checked or indeterminate" }
    };

    private List<SuApiProperty> checkboxGroupProperties = new()
    {
        new() { Name = "Values", Type = "IReadOnlyList<string>?", Default = "null", Description = "Controlled values of checked items" },
        new() { Name = "DefaultValues", Type = "IReadOnlyList<string>?", Default = "null", Description = "Default values for uncontrolled mode" },
        new() { Name = "ValuesChanged", Type = "EventCallback<IReadOnlyList<string>>", Description = "Callback when values change" },
        new() { Name = "ValuesExpression", Type = "Expression<Func<IReadOnlyList<string>?>>?", Default = "null", Description = "Expression for EditForm binding and validation" },
        new() { Name = "Disabled", Type = "bool", Default = "false", Description = "Disable entire group" },
        new() { Name = "Name", Type = "string?", Default = "null", Description = "Form name for hidden inputs" }
    };

    private List<SuApiProperty> checkboxGroupLabelProperties = new()
    {
        new() { Name = "ChildContent", Type = "RenderFragment?", Description = "Label content for the checkbox group" }
    };

    private List<SuApiProperty> dataAttributes = new()
    {
        new() { Name = "data-state", Type = "\"checked\" | \"unchecked\" | \"indeterminate\"", Description = "Current state of the checkbox" },
        new() { Name = "data-disabled", Type = "Present when disabled", Description = "Indicates disabled state" }
    };

    private List<SuApiProperty> keyboardNavigation = new()
    {
        new() { Name = "Space", Description = "Toggles the checkbox state", Type = "" },
    };

    private const string anatomyCode = @"<SmCheckboxRoot>
    <SmCheckboxIndicator>
        <span>✓</span>
    </SmCheckboxIndicator>
</SmCheckboxRoot>";

    private const string basicExampleCode = @"<SmCheckboxRoot DefaultChecked=""true"">
    <SmCheckboxIndicator>
        <span>✓</span>
    </SmCheckboxIndicator>
</SmCheckboxRoot>";

    private const string withLabelExampleCode = @"<label style=""display: flex; gap: 0.5rem; align-items: center;"">
    <SmCheckboxRoot id=""c1"">
        <SmCheckboxIndicator>
            <span>✓</span>
        </SmCheckboxIndicator>
    </SmCheckboxRoot>
    Accept terms and conditions
</label>";

    private const string controlledExampleCode = @"@code {
    private bool isChecked = true;
}

<SmCheckboxRoot @bind-Checked=""isChecked"">
    <SmCheckboxIndicator>
        <span>✓</span>
    </SmCheckboxIndicator>
</SmCheckboxRoot>";

    private const string indeterminateExampleCode = @"@code {
    private bool isIndeterminate = true;
}

<SmCheckboxRoot @bind-Indeterminate=""isIndeterminate"">
    <SmCheckboxIndicator>
        @if (isIndeterminate)
        {
            <span>-</span>
        }
        else
        {
            <span>✓</span>
        }
    </SmCheckboxIndicator>
</SmCheckboxRoot>";

    private const string groupExampleCode = @"@code {
    private IReadOnlyList<string> values = new[] { ""apple"" };
}

<SmCheckboxGroup @bind-Values=""values"">
    <SmCheckboxGroupLabel>Favorite Fruits</SmCheckboxGroupLabel>
    
    <label>
        <SmCheckboxRoot Value=""apple"">
            <SmCheckboxIndicator>✓</SmCheckboxIndicator>
        </SmCheckboxRoot>
        Apple
    </label>
    
    <label>
        <SmCheckboxRoot Value=""banana"">
            <SmCheckboxIndicator>✓</SmCheckboxIndicator>
        </SmCheckboxRoot>
        Banana
    </label>
</SmCheckboxGroup>";

    private const string editFormSingleExampleCode = @"@using System.ComponentModel.DataAnnotations

<EditForm Model=""model"" OnValidSubmit=""HandleSubmit"">
    <DataAnnotationsValidator />
    
    <label style=""display: flex; gap: 0.5rem; align-items: center;"">
        <SmCheckboxRoot @bind-Checked=""model.AcceptTerms"">
            <SmCheckboxIndicator>✓</SmCheckboxIndicator>
        </SmCheckboxRoot>
        Accept Terms and Conditions
    </label>
    <ValidationMessage For=""@(() => model.AcceptTerms)"" />
    
    <button type=""submit"">Submit</button>
</EditForm>

@code {
    private FormModel model = new();

    public class FormModel
    {
        [Range(typeof(bool), ""true"", ""true"", 
            ErrorMessage = ""You must accept the terms"")]
        public bool AcceptTerms { get; set; }
    }

    private void HandleSubmit() { /* handle submission */ }
}";

    private const string editFormGroupExampleCode = @"@using System.ComponentModel.DataAnnotations

<EditForm Model=""model"" OnValidSubmit=""HandleSubmit"">
    <DataAnnotationsValidator />
    
    <SmCheckboxGroup @bind-Values=""model.Interests"">
        <SmCheckboxGroupLabel>Select your interests</SmCheckboxGroupLabel>
        
        <label>
            <SmCheckboxRoot Value=""technology"">
                <SmCheckboxIndicator>✓</SmCheckboxIndicator>
            </SmCheckboxRoot>
            Technology
        </label>
        
        <label>
            <SmCheckboxRoot Value=""sports"">
                <SmCheckboxIndicator>✓</SmCheckboxIndicator>
            </SmCheckboxRoot>
            Sports
        </label>
        
        <label>
            <SmCheckboxRoot Value=""music"">
                <SmCheckboxIndicator>✓</SmCheckboxIndicator>
            </SmCheckboxRoot>
            Music
        </label>
    </SmCheckboxGroup>
    <ValidationMessage For=""@(() => model.Interests)"" />
    
    <button type=""submit"">Submit</button>
</EditForm>

@code {
    private FormModel model = new();

    public class FormModel
    {
        [MinLength(1, ErrorMessage = ""Select at least one interest"")]
        public IReadOnlyList<string>? Interests { get; set; } = [];
    }

    private void HandleSubmit() { /* handle submission */ }
}";

    private const string cssExampleCode = @"/* Checkbox styles */
.checkbox {
    width: 1.25rem;
    height: 1.25rem;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: 2px solid #ccc;
    border-radius: 4px;
    cursor: pointer;
}

.checkbox:hover {
    border-color: #666;
}

.checkbox[data-state=""checked""],
.checkbox[data-state=""indeterminate""] {
    background: #0066cc;
    border-color: #0066cc;
}

.checkbox[data-disabled] {
    opacity: 0.5;
    cursor: not-allowed;
}

/* Indicator styles */
.checkbox-indicator {
    color: white;
}";
}
