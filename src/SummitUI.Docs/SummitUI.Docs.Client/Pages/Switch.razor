@page "/docs/switch"
@layout DocsLayout
@rendermode InteractiveWebAssembly
@using SummitUI.Docs.Design
<PageTitle>SummitUI - Switch</PageTitle>

<div class="flex flex-col gap-12">
    @* Header *@
    <div class="flex flex-col gap-4">
        <div>
            <SuBadge Variant="SuBadgeVariant.Outline">Component</SuBadge>
        </div>
        <SuHeading Level="SuHeadingLevel.H1" class="flex flex-row items-center gap-4">
            Switch
            <SuPromptButton ComponentName="Switch" Url="/docs/switch" />
        </SuHeading>
        <SuText Lead="true" Muted="true">
            A control that allows the user to toggle between checked and not checked.
        </SuText>
    </div>

    @* Live Demo *@
    <SuSection Title="Demo">
        <SuCard>
            <div class="flex flex-col gap-4">
                <label class="flex items-center gap-3 cursor-pointer">
                    <SwitchRoot @bind-Checked="isChecked1" class="demo-switch">
                        <SwitchThumb class="demo-thumb" />
                    </SwitchRoot>
                    <span class="text-sm text-su-foreground">Airplane mode</span>
                </label>
                
                <label class="flex items-center gap-3 cursor-pointer">
                    <SwitchRoot @bind-Checked="isChecked2" class="demo-switch">
                        <SwitchThumb class="demo-thumb" />
                    </SwitchRoot>
                    <span class="text-sm text-su-foreground">Dark mode</span>
                </label>
                
                <label class="flex items-center gap-3 cursor-not-allowed opacity-50">
                    <SwitchRoot Disabled="true" class="demo-switch">
                        <SwitchThumb class="demo-thumb" />
                    </SwitchRoot>
                    <span class="text-sm text-su-foreground">Disabled switch</span>
                </label>
            </div>
        </SuCard>
    </SuSection>

    @* Features *@
    <SuSection Title="Features">
        <ul class="grid gap-2 text-sm text-su-muted-foreground">
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                Two states: checked and unchecked
            </li>
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                Keyboard navigation (Space/Enter to toggle)
            </li>
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                Controlled and uncontrolled modes
            </li>
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                Support for HTML forms (hidden input)
            </li>
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                WCAG compliant with proper ARIA attributes
            </li>
        </ul>
    </SuSection>

    @* Installation *@
    <SuSection Title="Installation">
        <SuCodeBlock Code="dotnet add package SummitUI" Language="bash" />
    </SuSection>

    @* Anatomy *@
    <SuSection Title="Anatomy" Description="Import the components and structure them as follows:">
        <SuCodeBlock Code="@anatomyCode" Language="razor" />
    </SuSection>

    @* Sub-components *@
    <SuSection Title="Sub-components">
        <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
            <SuCard>
                <SuCardTitle>SwitchRoot</SuCardTitle>
                <SuCardDescription class="mt-1">The root switch component containing the button element.</SuCardDescription>
            </SuCard>
            <SuCard>
                <SuCardTitle>SwitchThumb</SuCardTitle>
                <SuCardDescription class="mt-1">The thumb that visually indicates the checked state.</SuCardDescription>
            </SuCard>
        </div>
    </SuSection>

    @* API Reference *@
    <SuSection Title="API Reference">
        <div class="flex flex-col gap-12">
            @foreach (var table in new[] { 
                (Title: "SwitchRoot", Props: switchRootProperties), 
                (Title: "SwitchThumb", Props: switchThumbProperties)
            })
            {
                <div class="flex flex-col gap-3">
                    <SuHeading Level="SuHeadingLevel.H3">@table.Title</SuHeading>
                    <SuTable>
                        <SuTableHeader>
                            <SuTableRow>
                                <SuTableHead>Property</SuTableHead>
                                <SuTableHead>Type</SuTableHead>
                                <SuTableHead>Default</SuTableHead>
                                <SuTableHead>Description</SuTableHead>
                            </SuTableRow>
                        </SuTableHeader>
                        <SuTableBody>
                            @foreach (var prop in table.Props)
                            {
                                <SuTableRow>
                                    <SuTableCell class="font-mono text-su-primary font-medium">
                                        @prop.Name
                                        @if (prop.Required)
                                        {
                                            <SuBadge Variant="SuBadgeVariant.Destructive" Size="SuSize.Small" class="ml-2">required</SuBadge>
                                        }
                                    </SuTableCell>
                                    <SuTableCell class="font-mono text-su-muted-foreground text-sm">@prop.Type</SuTableCell>
                                    <SuTableCell class="font-mono text-su-muted-foreground text-sm">@(prop.Default ?? "-")</SuTableCell>
                                    <SuTableCell class="text-su-muted-foreground">@(prop.Description ?? "-")</SuTableCell>
                                </SuTableRow>
                            }
                        </SuTableBody>
                    </SuTable>
                </div>
            }
        </div>
    </SuSection>

    @* Examples *@
    <SuSection Title="Examples">
        <div class="flex flex-col gap-8">
            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">Basic Usage</SuHeading>
                <SuCodeBlock Code="@basicExampleCode" Language="razor" />
            </div>

            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">With Label</SuHeading>
                <SuText Size="SuTextSize.Small" Muted="true">Associate the switch with a label for better accessibility.</SuText>
                <SuCodeBlock Code="@withLabelExampleCode" Language="razor" />
            </div>

            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">Controlled Mode</SuHeading>
                <SuText Size="SuTextSize.Small" Muted="true">Control the checked state externally.</SuText>
                <SuCodeBlock Code="@controlledExampleCode" Language="razor" />
            </div>

            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">Form Integration</SuHeading>
                <SuText Size="SuTextSize.Small" Muted="true">Use with EditForm for form submissions.</SuText>
                <SuCodeBlock Code="@formExampleCode" Language="razor" />
            </div>
        </div>
    </SuSection>

    @* Styling *@
    <SuSection Title="Styling">
        <div class="flex flex-col gap-12">
            <div class="flex flex-col gap-3">
                <SuHeading Level="SuHeadingLevel.H3">Data Attributes</SuHeading>
                <SuTable>
                    <SuTableHeader>
                        <SuTableRow>
                            <SuTableHead>Attribute</SuTableHead>
                            <SuTableHead>Values</SuTableHead>
                            <SuTableHead>Description</SuTableHead>
                        </SuTableRow>
                    </SuTableHeader>
                    <SuTableBody>
                        @foreach (var attr in dataAttributes)
                        {
                            <SuTableRow>
                                <SuTableCell class="font-mono text-su-primary font-medium">@attr.Name</SuTableCell>
                                <SuTableCell class="font-mono text-su-muted-foreground text-sm">@attr.Type</SuTableCell>
                                <SuTableCell class="text-su-muted-foreground">@attr.Description</SuTableCell>
                            </SuTableRow>
                        }
                    </SuTableBody>
                </SuTable>
            </div>

            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">CSS Example</SuHeading>
                <SuCodeBlock Code="@cssExampleCode" Language="css" />
            </div>
        </div>
    </SuSection>

    @* Accessibility *@
    <SuSection Title="Accessibility">
        <div class="flex flex-col gap-12">
            <div class="flex flex-col gap-3">
                <SuHeading Level="SuHeadingLevel.H3">Keyboard Navigation</SuHeading>
                <SuTable>
                    <SuTableHeader>
                        <SuTableRow>
                            <SuTableHead>Key</SuTableHead>
                            <SuTableHead>Action</SuTableHead>
                        </SuTableRow>
                    </SuTableHeader>
                    <SuTableBody>
                        @foreach (var nav in keyboardNavigation)
                        {
                            <SuTableRow>
                                <SuTableCell class="font-medium text-su-foreground">@nav.Name</SuTableCell>
                                <SuTableCell class="text-su-muted-foreground">@nav.Description</SuTableCell>
                            </SuTableRow>
                        }
                    </SuTableBody>
                </SuTable>
            </div>

            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">ARIA Attributes</SuHeading>
                <ul class="grid gap-2 text-sm text-su-muted-foreground">
                    <li class="flex items-start gap-2">
                        <span class="text-su-foreground font-medium shrink-0">role:</span>
                        <span><code>switch</code> is set on the root element</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="text-su-foreground font-medium shrink-0">aria-checked:</span>
                        <span>Reflects the current state (<code>true</code> or <code>false</code>)</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="text-su-foreground font-medium shrink-0">aria-disabled:</span>
                        <span>Set when the switch is disabled</span>
                    </li>
                </ul>
            </div>
        </div>
    </SuSection>
</div>

<style>
    /* Demo Switch Styles */
    .demo-switch {
        width: 2.75rem;
        height: 1.5rem;
        background: rgb(var(--su-muted));
        border-radius: 9999px;
        position: relative;
        border: none;
        cursor: pointer;
        transition: background 0.15s;
        padding: 0;
    }
    
    .demo-switch:hover {
        background: rgb(var(--su-muted-foreground) / 0.3);
    }
    
    .demo-switch[data-state="checked"] {
        background: rgb(var(--su-primary));
    }
    
    .demo-switch[data-disabled] {
        opacity: 0.5;
        cursor: not-allowed;
    }
    
    .demo-thumb {
        display: block;
        width: 1.25rem;
        height: 1.25rem;
        background: rgb(var(--su-background));
        border-radius: 9999px;
        transition: transform 0.15s;
        transform: translateX(2px);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    }
    
    .demo-switch[data-state="checked"] .demo-thumb {
        transform: translateX(calc(2.75rem - 1.25rem - 2px));
    }
</style>

@code {
    private List<SuApiProperty> switchRootProperties = new()
    {
        new() { Name = "Checked", Type = "bool?", Default = "null", Description = "Controlled checked state" },
        new() { Name = "DefaultChecked", Type = "bool", Default = "false", Description = "Default checked state for uncontrolled mode" },
        new() { Name = "CheckedChanged", Type = "EventCallback<bool>", Description = "Callback when checked state changes" },
        new() { Name = "Disabled", Type = "bool", Default = "false", Description = "Prevents interaction with the switch" },
        new() { Name = "Required", Type = "bool", Default = "false", Description = "Indicates switch must be checked for form submission" },
        new() { Name = "Name", Type = "string?", Default = "null", Description = "Form field name for hidden input" },
        new() { Name = "Value", Type = "string?", Default = "\"on\"", Description = "Value submitted with form data" }
    };

    private List<SuApiProperty> switchThumbProperties = new()
    {
        new() { Name = "ChildContent", Type = "RenderFragment?", Description = "Optional content to render inside the thumb" }
    };

    private List<SuApiProperty> dataAttributes = new()
    {
        new() { Name = "data-state", Type = "\"checked\" | \"unchecked\"", Description = "Current state of the switch" },
        new() { Name = "data-disabled", Type = "Present when disabled", Description = "Indicates disabled state" }
    };

    private List<SuApiProperty> keyboardNavigation = new()
    {
        new() { Name = "Space", Description = "Toggles the switch state", Type = "" },
        new() { Name = "Enter", Description = "Toggles the switch state", Type = "" }
    };

    private bool isChecked1 = false;
    private bool isChecked2 = true;

    private const string anatomyCode = @"<SwitchRoot>
    <SwitchThumb />
</SwitchRoot>";

    private const string basicExampleCode = @"<SwitchRoot DefaultChecked=""true"">
    <SwitchThumb />
</SwitchRoot>";

    private const string withLabelExampleCode = @"<label style=""display: flex; gap: 0.5rem; align-items: center;"">
    <SwitchRoot id=""airplane-mode"">
        <SwitchThumb />
    </SwitchRoot>
    Airplane mode
</label>";

    private const string controlledExampleCode = @"@code {
    private bool isChecked = true;
}

<SwitchRoot @bind-Checked=""isChecked"">
    <SwitchThumb />
</SwitchRoot>

<p>Switch is @(isChecked ? ""on"" : ""off"")</p>";

    private const string formExampleCode = @"<EditForm Model=""@model"" OnValidSubmit=""HandleSubmit"">
    <DataAnnotationsValidator />
    
    <label>
        <SwitchRoot @bind-Checked=""model.EnableNotifications"" Name=""notifications"">
            <SwitchThumb />
        </SwitchRoot>
        Enable Notifications
    </label>
    
    <button type=""submit"">Submit</button>
</EditForm>";

    private const string cssExampleCode = @"/* Switch root styles */
.switch {
    width: 2.75rem;
    height: 1.5rem;
    background: #e0e0e0;
    border-radius: 9999px;
    position: relative;
    border: none;
    cursor: pointer;
    transition: background 0.15s;
}

.switch:hover {
    background: #d0d0d0;
}

.switch[data-state=""checked""] {
    background: #0066cc;
}

.switch[data-disabled] {
    opacity: 0.5;
    cursor: not-allowed;
}

/* Thumb styles */
.switch-thumb {
    display: block;
    width: 1.25rem;
    height: 1.25rem;
    background: white;
    border-radius: 9999px;
    transition: transform 0.15s;
    transform: translateX(2px);
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
}

.switch[data-state=""checked""] .switch-thumb {
    transform: translateX(calc(2.75rem - 1.25rem - 2px));
}";
}
