@page "/docs/accordion"
@rendermode InteractiveWebAssembly
@layout DocsLayout
@using SummitUI
<PageTitle>SummitUI - Accordion</PageTitle>
<div class="flex flex-col gap-12">
    @* Header *@
    <div class="flex flex-col gap-4">
        <div>
            <SuBadge Variant="SuBadgeVariant.Outline">Component</SuBadge>
        </div>
        <SuHeading Level="SuHeadingLevel.H1" class="flex flex-row items-center gap-4">
            Accordion
            <SuPromptButton ComponentName="Accordion" />
        </SuHeading>
        <SuText Lead="true" Muted="true">
            A vertically stacked set of interactive headings that each reveal an associated section of content.
        </SuText>
    </div>

    @* Live Demo *@
    <SuSection Title="Demo">
        <SuCard>
            <AccordionRoot DefaultValue="item-1" class="w-full divide-y divide-su-border">
                <AccordionItem Value="item-1">
                    <AccordionHeader>
                        <AccordionTrigger class="group flex flex-1 items-center justify-between py-4 text-[0.9375rem] font-medium bg-transparent border-none cursor-pointer text-su-foreground transition-colors w-full text-left hover:text-su-primary data-[disabled]:opacity-50 data-[disabled]:cursor-not-allowed data-[state=open]:text-su-primary">
                            <span>Is it accessible?</span>
                            <svg class="shrink-0 transition-transform duration-200 ease-out group-data-[state=open]:rotate-180 text-su-muted-foreground group-hover:text-su-primary group-data-[state=open]:text-su-primary" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="m6 9 6 6 6-6"/>
                            </svg>
                        </AccordionTrigger>
                    </AccordionHeader>
                    <AccordionContent class="overflow-hidden data-[state=open]:animate-accordion-down data-[state=closed]:animate-accordion-up" ForceMount="true">
                        <div class="pb-4 pt-0 text-sm text-su-muted-foreground">
                            Yes. It adheres to the WAI-ARIA design pattern for accordions, including proper keyboard navigation and ARIA attributes.
                        </div>
                    </AccordionContent>
                </AccordionItem>
                <AccordionItem Value="item-2">
                    <AccordionHeader>
                        <AccordionTrigger class="group flex flex-1 items-center justify-between py-4 text-[0.9375rem] font-medium bg-transparent border-none cursor-pointer text-su-foreground transition-colors w-full text-left hover:text-su-primary data-[disabled]:opacity-50 data-[disabled]:cursor-not-allowed data-[state=open]:text-su-primary">
                            <span>Is it styled?</span>
                            <svg class="shrink-0 transition-transform duration-200 ease-out group-data-[state=open]:rotate-180" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="m6 9 6 6 6-6"/>
                            </svg>
                        </AccordionTrigger>
                    </AccordionHeader>
                    <AccordionContent class="overflow-hidden data-[state=open]:animate-accordion-down data-[state=closed]:animate-accordion-up" ForceMount="true">
                        <div class="pb-4 pt-0 text-sm text-su-muted-foreground">
                            No. It's completely unstyled by default, giving you full control over the appearance using CSS and data attributes.
                        </div>
                    </AccordionContent>
                </AccordionItem>
                <AccordionItem Value="item-3">
                    <AccordionHeader>
                        <AccordionTrigger class="group flex flex-1 items-center justify-between py-4 text-[0.9375rem] font-medium bg-transparent border-none cursor-pointer text-su-foreground transition-colors w-full text-left hover:text-su-primary data-[disabled]:opacity-50 data-[disabled]:cursor-not-allowed data-[state=open]:text-su-primary">
                            <span>Can I use it with animations?</span>
                            <svg class="shrink-0 transition-transform duration-200 ease-out group-data-[state=open]:rotate-180" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <path d="m6 9 6 6 6-6"/>
                            </svg>
                        </AccordionTrigger>
                    </AccordionHeader>
                    <AccordionContent class="overflow-hidden data-[state=open]:animate-accordion-down data-[state=closed]:animate-accordion-up" ForceMount="true">
                        <div class="pb-4 pt-0 text-sm text-su-muted-foreground">
                            Yes! CSS variables for height and width are automatically set, allowing smooth CSS transitions for expand/collapse animations.
                        </div>
                    </AccordionContent>
                </AccordionItem>
            </AccordionRoot>
        </SuCard>
    </SuSection>

    @* Features *@
    <SuSection Title="Features">
        <ul class="grid gap-2 text-sm text-su-muted-foreground">
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                Full keyboard navigation
            </li>
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                Single or multiple expanded items
            </li>
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                Controlled and uncontrolled modes
            </li>
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                Collapsible option for single mode
            </li>
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                Horizontal and vertical orientations
            </li>
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                WCAG compliant with proper ARIA attributes
            </li>
        </ul>
    </SuSection>

    @* Installation *@
    <SuSection Title="Installation">
        <SuCodeBlock Code="dotnet add package SummitUI" Language="bash" />
    </SuSection>

    @* Anatomy *@
    <SuSection Title="Anatomy" Description="Import the components and structure them as follows:">
        <SuCodeBlock Code="@anatomyCode" Language="razor" />
    </SuSection>

    @* Sub-components *@
    <SuSection Title="Sub-components">
        <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
            <SuCard>
                <SuCardTitle>AccordionRoot</SuCardTitle>
                <SuCardDescription class="mt-1">Root container that manages state and provides context to all children.</SuCardDescription>
            </SuCard>
            <SuCard>
                <SuCardTitle>AccordionItem</SuCardTitle>
                <SuCardDescription class="mt-1">Individual collapsible section container with a unique value identifier.</SuCardDescription>
            </SuCard>
            <SuCard>
                <SuCardTitle>AccordionHeader</SuCardTitle>
                <SuCardDescription class="mt-1">Semantic heading wrapper that provides proper heading semantics.</SuCardDescription>
            </SuCard>
            <SuCard>
                <SuCardTitle>AccordionTrigger</SuCardTitle>
                <SuCardDescription class="mt-1">Interactive button that toggles the associated content panel.</SuCardDescription>
            </SuCard>
            <SuCard>
                <SuCardTitle>AccordionContent</SuCardTitle>
                <SuCardDescription class="mt-1">Collapsible content panel that shows/hides based on state.</SuCardDescription>
            </SuCard>
        </div>
    </SuSection>

    @* API Reference *@
    <SuSection Title="API Reference">
        <div class="flex flex-col gap-12">
            @foreach (var table in new[] { 
                (Title: "AccordionRoot", Props: accordionRootProperties), 
                (Title: "AccordionItem", Props: accordionItemProperties),
                (Title: "AccordionHeader", Props: accordionHeaderProperties),
                (Title: "AccordionTrigger", Props: accordionTriggerProperties),
                (Title: "AccordionContent", Props: accordionContentProperties)
            })
            {
                <div class="flex flex-col gap-3">
                    <SuHeading Level="SuHeadingLevel.H3">@table.Title</SuHeading>
                    <SuTable>
                        <SuTableHeader>
                            <SuTableRow>
                                <SuTableHead>Property</SuTableHead>
                                <SuTableHead>Type</SuTableHead>
                                <SuTableHead>Default</SuTableHead>
                                <SuTableHead>Description</SuTableHead>
                            </SuTableRow>
                        </SuTableHeader>
                        <SuTableBody>
                            @foreach (var prop in table.Props)
                            {
                                <SuTableRow>
                                    <SuTableCell class="font-mono text-su-primary font-medium">
                                        @prop.Name
                                        @if (prop.Required)
                                        {
                                            <SuBadge Variant="SuBadgeVariant.Destructive" Size="SuSize.Small" class="ml-2">required</SuBadge>
                                        }
                                    </SuTableCell>
                                    <SuTableCell class="font-mono text-su-muted-foreground text-sm">@prop.Type</SuTableCell>
                                    <SuTableCell class="font-mono text-su-muted-foreground text-sm">@(prop.Default ?? "-")</SuTableCell>
                                    <SuTableCell class="text-su-muted-foreground">@(prop.Description ?? "-")</SuTableCell>
                                </SuTableRow>
                            }
                        </SuTableBody>
                    </SuTable>
                </div>
            }
        </div>
    </SuSection>

    @* Examples *@
    <SuSection Title="Examples">
        <div class="flex flex-col gap-8">
            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">Basic Usage</SuHeading>
                <SuCodeBlock Code="@basicExampleCode" Language="razor" />
            </div>

            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">Multiple Expanded Items</SuHeading>
                <SuText Size="SuTextSize.Small" Muted="true">Allow multiple items to be expanded simultaneously.</SuText>
                <SuCodeBlock Code="@multipleExampleCode" Language="razor" />
            </div>

            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">Controlled Mode</SuHeading>
                <SuText Size="SuTextSize.Small" Muted="true">Control the expanded state externally.</SuText>
                <SuCodeBlock Code="@controlledExampleCode" Language="razor" />
            </div>

            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">Disabled Items</SuHeading>
                <SuText Size="SuTextSize.Small" Muted="true">Disable specific accordion items.</SuText>
                <SuCodeBlock Code="@disabledExampleCode" Language="razor" />
            </div>
        </div>
    </SuSection>

    @* Styling *@
    <SuSection Title="Styling">
        <div class="flex flex-col gap-12">
            <div class="flex flex-col gap-3">
                <SuHeading Level="SuHeadingLevel.H3">Data Attributes</SuHeading>
                <SuTable>
                    <SuTableHeader>
                        <SuTableRow>
                            <SuTableHead>Attribute</SuTableHead>
                            <SuTableHead>Values</SuTableHead>
                            <SuTableHead>Description</SuTableHead>
                        </SuTableRow>
                    </SuTableHeader>
                    <SuTableBody>
                        @foreach (var attr in dataAttributes)
                        {
                            <SuTableRow>
                                <SuTableCell class="font-mono text-su-primary font-medium">@attr.Name</SuTableCell>
                                <SuTableCell class="font-mono text-su-muted-foreground text-sm">@attr.Type</SuTableCell>
                                <SuTableCell class="text-su-muted-foreground">@attr.Description</SuTableCell>
                            </SuTableRow>
                        }
                    </SuTableBody>
                </SuTable>
            </div>

            <div class="flex flex-col gap-3">
                <SuHeading Level="SuHeadingLevel.H3">CSS Variables</SuHeading>
                <SuTable>
                    <SuTableHeader>
                        <SuTableRow>
                            <SuTableHead>Variable</SuTableHead>
                            <SuTableHead>Description</SuTableHead>
                        </SuTableRow>
                    </SuTableHeader>
                    <SuTableBody>
                        @foreach (var variable in cssVariables)
                        {
                            <SuTableRow>
                                <SuTableCell class="font-mono text-su-primary font-medium">@variable.Name</SuTableCell>
                                <SuTableCell class="text-su-muted-foreground">@variable.Description</SuTableCell>
                            </SuTableRow>
                        }
                    </SuTableBody>
                </SuTable>
            </div>
            
            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">CSS Example</SuHeading>
                <SuCodeBlock Code="@cssExampleCode" Language="css" />
            </div>
        </div>
    </SuSection>

    @* Accessibility *@
    <SuSection Title="Accessibility">
        <div class="flex flex-col gap-12">
            <div class="flex flex-col gap-3">
                <SuHeading Level="SuHeadingLevel.H3">Keyboard Navigation</SuHeading>
                <SuTable>
                    <SuTableHeader>
                        <SuTableRow>
                            <SuTableHead>Key</SuTableHead>
                            <SuTableHead>Action</SuTableHead>
                        </SuTableRow>
                    </SuTableHeader>
                    <SuTableBody>
                        @foreach (var nav in keyboardNavigation)
                        {
                            <SuTableRow>
                                <SuTableCell class="font-medium text-su-foreground">@nav.Name</SuTableCell>
                                <SuTableCell class="text-su-muted-foreground">@nav.Description</SuTableCell>
                            </SuTableRow>
                        }
                    </SuTableBody>
                </SuTable>
            </div>

            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">ARIA Attributes</SuHeading>
                <ul class="grid gap-2 text-sm text-su-muted-foreground">
                    <li class="flex items-start gap-2">
                        <span class="text-su-foreground font-medium shrink-0">AccordionHeader:</span>
                        <span>Renders with <code>role="heading"</code> and appropriate <code>aria-level</code></span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="text-su-foreground font-medium shrink-0">AccordionTrigger:</span>
                        <span>Renders as button with <code>aria-expanded</code> and <code>aria-controls</code></span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="text-su-foreground font-medium shrink-0">AccordionContent:</span>
                        <span>Renders with <code>role="region"</code> and <code>aria-labelledby</code></span>
                    </li>
                </ul>
            </div>
        </div>
    </SuSection>
</div>

@code {
    private List<SuApiProperty> accordionRootProperties = new()
    {
        new() { Name = "Type", Type = "AccordionType", Default = "Single", Description = "Whether one or multiple items can be expanded" },
        new() { Name = "Value", Type = "string?", Default = "null", Description = "Controlled expanded value (single mode)" },
        new() { Name = "Values", Type = "IReadOnlyList<string>?", Default = "null", Description = "Controlled expanded values (multiple mode)" },
        new() { Name = "DefaultValue", Type = "string?", Default = "null", Description = "Default expanded value (uncontrolled, single)" },
        new() { Name = "DefaultValues", Type = "IReadOnlyList<string>?", Default = "null", Description = "Default expanded values (uncontrolled, multiple)" },
        new() { Name = "ValueChanged", Type = "EventCallback<string?>", Description = "Callback when value changes (single mode)" },
        new() { Name = "ValuesChanged", Type = "EventCallback<IReadOnlyList<string>>", Description = "Callback when values change (multiple mode)" },
        new() { Name = "Orientation", Type = "AccordionOrientation", Default = "Vertical", Description = "Affects keyboard navigation direction" },
        new() { Name = "Loop", Type = "bool", Default = "true", Description = "Whether keyboard nav loops from last to first" },
        new() { Name = "Disabled", Type = "bool", Default = "false", Description = "Disable the entire accordion" },
        new() { Name = "Collapsible", Type = "bool", Default = "true", Description = "Allow closing the last open item (single mode)" }
    };

    private List<SuApiProperty> accordionItemProperties = new()
    {
        new() { Name = "Value", Type = "string", Required = true, Description = "Unique identifier for this accordion item" },
        new() { Name = "Disabled", Type = "bool", Default = "false", Description = "Disable this specific item" }
    };

    private List<SuApiProperty> accordionHeaderProperties = new()
    {
        new() { Name = "As", Type = "string", Default = "\"h3\"", Description = "HTML element to render" },
        new() { Name = "Level", Type = "int", Default = "3", Description = "ARIA heading level (1-6)" }
    };

    private List<SuApiProperty> accordionTriggerProperties = new()
    {
    };

    private List<SuApiProperty> accordionContentProperties = new()
    {
        new() { Name = "As", Type = "string", Default = "\"div\"", Description = "HTML element to render" },
        new() { Name = "ForceMount", Type = "bool", Default = "false", Description = "Always render in DOM (useful for CSS animations)" }
    };

    private List<SuApiProperty> dataAttributes = new()
    {
        new() { Name = "data-state", Type = "\"open\" | \"closed\"", Description = "Current expansion state" },
        new() { Name = "data-disabled", Type = "Present when disabled", Description = "Indicates disabled state" },
        new() { Name = "data-orientation", Type = "\"vertical\" | \"horizontal\"", Description = "Current orientation" }
    };

    private List<SuApiProperty> cssVariables = new()
    {
        new() { Name = "--summit-accordion-content-height", Description = "Measured height of content in pixels", Type = "" },
        new() { Name = "--summit-accordion-content-width", Description = "Measured width of content in pixels", Type = "" }
    };

    private List<SuApiProperty> keyboardNavigation = new()
    {
        new() { Name = "Enter / Space", Description = "Toggle the focused accordion item", Type = "" },
        new() { Name = "ArrowDown", Description = "Move focus to next trigger (vertical)", Type = "" },
        new() { Name = "ArrowUp", Description = "Move focus to previous trigger (vertical)", Type = "" },
        new() { Name = "ArrowRight", Description = "Move focus to next trigger (horizontal)", Type = "" },
        new() { Name = "ArrowLeft", Description = "Move focus to previous trigger (horizontal)", Type = "" },
        new() { Name = "Home", Description = "Move focus to first trigger", Type = "" },
        new() { Name = "End", Description = "Move focus to last trigger", Type = "" }
    };

    private const string anatomyCode = @"<AccordionRoot>
    <AccordionItem Value=""item-1"">
        <AccordionHeader>
            <AccordionTrigger>Title</AccordionTrigger>
        </AccordionHeader>
        <AccordionContent>
            Content goes here...
        </AccordionContent>
    </AccordionItem>
</AccordionRoot>";

    private const string basicExampleCode = @"<AccordionRoot DefaultValue=""item-1"">
    <AccordionItem Value=""item-1"">
        <AccordionHeader>
            <AccordionTrigger>What is SummitUI?</AccordionTrigger>
        </AccordionHeader>
        <AccordionContent>
            <p>SummitUI is a Blazor component library focused on accessibility.</p>
        </AccordionContent>
    </AccordionItem>
    <AccordionItem Value=""item-2"">
        <AccordionHeader>
            <AccordionTrigger>Is it accessible?</AccordionTrigger>
        </AccordionHeader>
        <AccordionContent>
            <p>Yes! All components are built with WCAG compliance in mind.</p>
        </AccordionContent>
    </AccordionItem>
</AccordionRoot>";

    private const string multipleExampleCode = @"<AccordionRoot Type=""AccordionType.Multiple"" 
               DefaultValues=""@(new[] { ""item-1"", ""item-2"" })"">
    <AccordionItem Value=""item-1"">
        <AccordionHeader>
            <AccordionTrigger>First Section</AccordionTrigger>
        </AccordionHeader>
        <AccordionContent>First content...</AccordionContent>
    </AccordionItem>
    <AccordionItem Value=""item-2"">
        <AccordionHeader>
            <AccordionTrigger>Second Section</AccordionTrigger>
        </AccordionHeader>
        <AccordionContent>Second content...</AccordionContent>
    </AccordionItem>
</AccordionRoot>";

    private const string controlledExampleCode = @"@code {
    private string? expandedItem = ""item-1"";
}

<AccordionRoot Value=""@expandedItem"" 
               ValueChanged=""@(v => expandedItem = v)"">
    <AccordionItem Value=""item-1"">
        <AccordionHeader>
            <AccordionTrigger>Section 1</AccordionTrigger>
        </AccordionHeader>
        <AccordionContent>Content 1</AccordionContent>
    </AccordionItem>
    <AccordionItem Value=""item-2"">
        <AccordionHeader>
            <AccordionTrigger>Section 2</AccordionTrigger>
        </AccordionHeader>
        <AccordionContent>Content 2</AccordionContent>
    </AccordionItem>
</AccordionRoot>

<p>Currently expanded: @(expandedItem ?? ""None"")</p>
<button @@onclick=""@(() => expandedItem = ""item-2"")"">Open Section 2</button>";

    private const string disabledExampleCode = @"<AccordionRoot DefaultValue=""item-1"">
    <AccordionItem Value=""item-1"">
        <AccordionHeader>
            <AccordionTrigger>Enabled Section</AccordionTrigger>
        </AccordionHeader>
        <AccordionContent>This section works normally.</AccordionContent>
    </AccordionItem>
    <AccordionItem Value=""item-2"" Disabled=""true"">
        <AccordionHeader>
            <AccordionTrigger>Disabled Section</AccordionTrigger>
        </AccordionHeader>
        <AccordionContent>This content cannot be accessed.</AccordionContent>
    </AccordionItem>
</AccordionRoot>";

    private const string cssExampleCode = @"/* Trigger styles */
.accordion-trigger {
    display: flex;
    justify-content: space-between;
    width: 100%;
    padding: 1rem;
    background: transparent;
    border: none;
    cursor: pointer;
    color: rgb(var(--su-foreground));
}

.accordion-trigger[data-state=""open""] {
    color: rgb(var(--su-primary));
}

.accordion-trigger:hover {
    color: rgb(var(--su-primary));
}

.accordion-trigger[data-disabled] {
    opacity: 0.5;
    cursor: not-allowed;
}

/* Content animation */
.accordion-content {
    overflow: hidden;
    transition: height 300ms ease-out;
}

.accordion-content[data-state=""open""] {
    height: var(--summit-accordion-content-height);
}

.accordion-content[data-state=""closed""] {
    height: 0;
}

/* Chevron rotation */
.accordion-trigger[data-state=""open""] .chevron {
    transform: rotate(180deg);
}";
}
