@page "/docs/datepicker"
@rendermode InteractiveWebAssembly
@layout DocsLayout
@using SummitUI

<PageTitle>SummitUI - DatePicker</PageTitle>

<div class="flex flex-col gap-12">
    @* Header *@
    <div class="flex flex-col gap-4">
        <div>
            <SuBadge Variant="SuBadgeVariant.Outline">Component</SuBadge>
        </div>
        <SuHeading Level="SuHeadingLevel.H1" class="flex flex-row items-center gap-4">
            DatePicker
            <SuPromptButton ComponentName="DatePicker" />
        </SuHeading>
        <SuText Lead="true" Muted="true">
            A date picker component that combines segmented date input with a calendar popover for intuitive date selection.
        </SuText>
    </div>

    @* Live Demo *@
    <SuSection Title="Demo">
        <SuCard>
            <div class="flex flex-col gap-6">
                <div class="flex flex-col gap-2">
                    <DatePickerRoot @bind-Value="selectedDate" Format="yyyy-MM-dd" class="group">
                        <DatePickerField class="@datePickerFieldClasses">
                            <DatePickerLabel class="sr-only">Select a date</DatePickerLabel>
                            <DatePickerInput class="flex" />
                            <DatePickerTrigger class="@datePickerTriggerClasses">
                                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect width="18" height="18" x="3" y="4" rx="2" ry="2"/><line x1="16" x2="16" y1="2" y2="6"/><line x1="8" x2="8" y1="2" y2="6"/><line x1="3" x2="21" y1="10" y2="10"/></svg>
                            </DatePickerTrigger>
                        </DatePickerField>
                        <DatePickerPortal>
                            <DatePickerContent class="@datePickerContentClasses" SideOffset="4">
                                <DatePickerCalendar @bind-Value="selectedDate" Context="cal">
                                    <DatePickerCalendarHeader class="flex items-center justify-between mb-2">
                                        <DatePickerCalendarPrevButton class="@calendarNavButtonClasses">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m15 18-6-6 6-6"/></svg>
                                        </DatePickerCalendarPrevButton>
                                        <DatePickerCalendarHeading class="font-semibold text-sm" />
                                        <DatePickerCalendarNextButton class="@calendarNavButtonClasses">
                                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m9 18 6-6-6-6"/></svg>
                                        </DatePickerCalendarNextButton>
                                    </DatePickerCalendarHeader>
                                    <DatePickerCalendarGrid class="border-collapse">
                                        <DatePickerCalendarGridHead>
                                            <DatePickerCalendarGridRow>
                                                @for (int i = 0; i < cal.Weekdays.Length; i++)
                                                {
                                                    var idx = i;
                                                    <DatePickerCalendarHeadCell Abbreviation="@cal.WeekdaysLong[idx]" class="p-2 text-center text-xs font-medium text-su-muted-foreground">
                                                        @cal.Weekdays[idx]
                                                    </DatePickerCalendarHeadCell>
                                                }
                                            </DatePickerCalendarGridRow>
                                        </DatePickerCalendarGridHead>
                                        <DatePickerCalendarGridBody>
                                            @foreach (var week in cal.CurrentMonth.Weeks)
                                            {
                                                <DatePickerCalendarGridRow>
                                                    @foreach (var date in week)
                                                    {
                                                        <DatePickerCalendarCell Date="@date" Context="cellCtx">
                                                            <DatePickerCalendarDay class="@calendarDayClasses" />
                                                        </DatePickerCalendarCell>
                                                    }
                                                </DatePickerCalendarGridRow>
                                            }
                                        </DatePickerCalendarGridBody>
                                    </DatePickerCalendarGrid>
                                </DatePickerCalendar>
                            </DatePickerContent>
                        </DatePickerPortal>
                    </DatePickerRoot>
                    <p class="text-xs text-su-muted-foreground">Selected: @(selectedDate?.ToString("yyyy-MM-dd") ?? "None")</p>
                </div>
            </div>
        </SuCard>
    </SuSection>

    @* Features *@
    <SuSection Title="Features">
        <ul class="grid gap-2 text-sm text-su-muted-foreground">
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                Combined segmented input and calendar popover for flexible date entry
            </li>
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                Full keyboard navigation in both input and calendar
            </li>
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                Localized date formatting and weekday names via browser Intl API
            </li>
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                Multiple calendar systems (Gregorian, Persian, Islamic, Hebrew, etc.)
            </li>
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                Min/max date constraints with visual feedback
            </li>
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                EditForm integration with validation support
            </li>
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                Controlled and uncontrolled modes
            </li>
            <li class="flex items-center gap-2">
                <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="text-su-primary"><path d="M20 6 9 17l-5-5"/></svg>
                WCAG compliant with proper ARIA attributes
            </li>
        </ul>
    </SuSection>

    @* Installation *@
    <SuSection Title="Installation">
        <SuCodeBlock Code="dotnet add package SummitUI" Language="bash" />
    </SuSection>

    @* Anatomy *@
    <SuSection Title="Anatomy" Description="Import the components and structure them as follows:">
        <SuCodeBlock Code="@anatomyCode" Language="razor" />
    </SuSection>

    @* Sub-components *@
    <SuSection Title="Sub-components">
        <div class="grid gap-4 sm:grid-cols-2 lg:grid-cols-3">
            @foreach (var sub in subComponents)
            {
                <SuCard>
                    <SuCardTitle>@sub.Name</SuCardTitle>
                    <SuCardDescription class="mt-1">@sub.Description</SuCardDescription>
                </SuCard>
            }
        </div>
    </SuSection>

    @* API Reference *@
    <SuSection Title="API Reference">
        <div class="flex flex-col gap-12">
            @foreach (var table in new[] { 
                (Title: "DatePickerRoot", Props: rootProps, Desc: "The root component that manages date picker state and provides cascading context."), 
                (Title: "DatePickerField", Props: fieldProps, Desc: "The date field containing segments and trigger button."),
                (Title: "DatePickerContent", Props: contentProps, Desc: "The floating calendar popover panel."),
                (Title: "DatePickerCalendar", Props: calendarProps, Desc: "The calendar grid for date selection.")
            })
            {
                <div class="flex flex-col gap-3">
                    <SuHeading Level="SuHeadingLevel.H3">@table.Title</SuHeading>
                    <SuText Size="SuTextSize.Small" Muted="true">@table.Desc</SuText>
                    <SuTable>
                        <SuTableHeader>
                            <SuTableRow>
                                <SuTableHead>Property</SuTableHead>
                                <SuTableHead>Type</SuTableHead>
                                <SuTableHead>Default</SuTableHead>
                                <SuTableHead>Description</SuTableHead>
                            </SuTableRow>
                        </SuTableHeader>
                        <SuTableBody>
                            @foreach (var prop in table.Props)
                            {
                                <SuTableRow>
                                    <SuTableCell class="font-mono text-su-primary font-medium">
                                        @prop.Name
                                        @if (prop.Required)
                                        {
                                            <SuBadge Variant="SuBadgeVariant.Destructive" Size="SuSize.Small" class="ml-2">required</SuBadge>
                                        }
                                    </SuTableCell>
                                    <SuTableCell class="font-mono text-su-muted-foreground text-sm">@prop.Type</SuTableCell>
                                    <SuTableCell class="font-mono text-su-muted-foreground text-sm">@(prop.Default ?? "-")</SuTableCell>
                                    <SuTableCell class="text-su-muted-foreground">@(prop.Description ?? "-")</SuTableCell>
                                </SuTableRow>
                            }
                        </SuTableBody>
                    </SuTable>
                </div>
            }
        </div>
    </SuSection>

    @* Enums *@
    <SuSection Title="Enums">
        <div class="flex flex-col gap-8">
            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">CalendarSystem</SuHeading>
                <SuCodeBlock Code="@calendarSystemEnumCode" Language="csharp" />
            </div>
            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">WeekStartsOn</SuHeading>
                <SuCodeBlock Code="@weekStartsOnEnumCode" Language="csharp" />
            </div>
        </div>
    </SuSection>

    @* Examples *@
    <SuSection Title="Examples">
        <div class="flex flex-col gap-8">
            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">Basic Usage</SuHeading>
                <SuCodeBlock Code="@basicExampleCode" Language="razor" />
            </div>

            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">Min/Max Constraints</SuHeading>
                <SuText Size="SuTextSize.Small" Muted="true">Limit selectable dates to a specific range.</SuText>
                <SuCodeBlock Code="@minMaxExampleCode" Language="razor" />
            </div>

            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">EditForm Integration</SuHeading>
                <SuText Size="SuTextSize.Small" Muted="true">Use with Blazor EditForm for form validation.</SuText>
                <SuCodeBlock Code="@editFormExampleCode" Language="razor" />
            </div>

            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">Controlled Open State</SuHeading>
                <SuText Size="SuTextSize.Small" Muted="true">Control when the calendar popover opens and closes.</SuText>
                <SuCodeBlock Code="@controlledExampleCode" Language="razor" />
            </div>

            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">Different Calendar Systems</SuHeading>
                <SuText Size="SuTextSize.Small" Muted="true">Display dates in different calendar systems (Persian, Islamic, Hebrew, etc.).</SuText>
                <SuCodeBlock Code="@calendarSystemExampleCode" Language="razor" />
            </div>
        </div>
    </SuSection>

    @* Styling *@
    <SuSection Title="Styling">
        <div class="flex flex-col gap-12">
            <div class="flex flex-col gap-3">
                <SuHeading Level="SuHeadingLevel.H3">Data Attributes</SuHeading>
                <SuTable>
                    <SuTableHeader>
                        <SuTableRow>
                            <SuTableHead>Attribute</SuTableHead>
                            <SuTableHead>Values</SuTableHead>
                            <SuTableHead>Description</SuTableHead>
                        </SuTableRow>
                    </SuTableHeader>
                    <SuTableBody>
                        @foreach (var attr in dataAttributes)
                        {
                            <SuTableRow>
                                <SuTableCell class="font-mono text-su-primary font-medium">@attr.Name</SuTableCell>
                                <SuTableCell class="font-mono text-su-muted-foreground text-sm">@attr.Type</SuTableCell>
                                <SuTableCell class="text-su-muted-foreground">@attr.Description</SuTableCell>
                            </SuTableRow>
                        }
                    </SuTableBody>
                </SuTable>
            </div>

            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">Tailwind Example</SuHeading>
                <SuCodeBlock Code="@tailwindExampleCode" Language="html" />
            </div>
        </div>
    </SuSection>

    @* Accessibility *@
    <SuSection Title="Accessibility">
        <div class="flex flex-col gap-12">
            <div class="flex flex-col gap-3">
                <SuHeading Level="SuHeadingLevel.H3">Keyboard Navigation - Segments</SuHeading>
                <SuTable>
                    <SuTableHeader>
                        <SuTableRow>
                            <SuTableHead>Key</SuTableHead>
                            <SuTableHead>Action</SuTableHead>
                        </SuTableRow>
                    </SuTableHeader>
                    <SuTableBody>
                        @foreach (var nav in segmentKeyboardNavigation)
                        {
                            <SuTableRow>
                                <SuTableCell class="font-medium text-su-foreground">@nav.Name</SuTableCell>
                                <SuTableCell class="text-su-muted-foreground">@nav.Description</SuTableCell>
                            </SuTableRow>
                        }
                    </SuTableBody>
                </SuTable>
            </div>

            <div class="flex flex-col gap-3">
                <SuHeading Level="SuHeadingLevel.H3">Keyboard Navigation - Calendar</SuHeading>
                <SuTable>
                    <SuTableHeader>
                        <SuTableRow>
                            <SuTableHead>Key</SuTableHead>
                            <SuTableHead>Action</SuTableHead>
                        </SuTableRow>
                    </SuTableHeader>
                    <SuTableBody>
                        @foreach (var nav in calendarKeyboardNavigation)
                        {
                            <SuTableRow>
                                <SuTableCell class="font-medium text-su-foreground">@nav.Name</SuTableCell>
                                <SuTableCell class="text-su-muted-foreground">@nav.Description</SuTableCell>
                            </SuTableRow>
                        }
                    </SuTableBody>
                </SuTable>
            </div>

            <div class="flex flex-col gap-4">
                <SuHeading Level="SuHeadingLevel.H3">ARIA Attributes</SuHeading>
                <ul class="grid gap-2 text-sm text-su-muted-foreground">
                    <li class="flex items-start gap-2">
                        <span class="text-su-foreground font-medium shrink-0">DatePickerField:</span>
                        <span>Has <code>role="group"</code> with <code>aria-labelledby</code> pointing to label</span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="text-su-foreground font-medium shrink-0">DatePickerTrigger:</span>
                        <span>Has <code>aria-haspopup="dialog"</code> and <code>aria-expanded</code></span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="text-su-foreground font-medium shrink-0">DatePickerContent:</span>
                        <span>Has <code>role="dialog"</code> with <code>aria-modal</code></span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="text-su-foreground font-medium shrink-0">Segments:</span>
                        <span>Each has <code>role="spinbutton"</code> with <code>aria-valuemin</code>, <code>aria-valuemax</code>, <code>aria-valuenow</code></span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="text-su-foreground font-medium shrink-0">Calendar Grid:</span>
                        <span>Has <code>role="grid"</code> with proper <code>aria-label</code></span>
                    </li>
                    <li class="flex items-start gap-2">
                        <span class="text-su-foreground font-medium shrink-0">Calendar Days:</span>
                        <span>Have <code>role="gridcell"</code> with <code>aria-selected</code> and <code>aria-disabled</code></span>
                    </li>
                </ul>
            </div>
        </div>
    </SuSection>
</div>

<style>
    .sr-only {
        position: absolute;
        width: 1px;
        height: 1px;
        padding: 0;
        margin: -1px;
        overflow: hidden;
        clip: rect(0, 0, 0, 0);
        white-space: nowrap;
        border: 0;
    }
</style>

@code {
    private DateOnly? selectedDate = DateOnly.FromDateTime(DateTime.Today);

    private string datePickerFieldClasses = "inline-flex items-center gap-1 px-3 py-2 bg-su-background border border-su-border rounded-lg text-sm transition-all focus-within:border-su-primary focus-within:ring-2 focus-within:ring-su-primary/20 group-data-[disabled]:opacity-50 group-data-[disabled]:cursor-not-allowed group-data-[invalid]:border-su-destructive [&_[data-segment]:not([data-segment='literal'])]:px-1 [&_[data-segment]:not([data-segment='literal'])]:py-0.5 [&_[data-segment]:not([data-segment='literal'])]:rounded [&_[data-segment]:not([data-segment='literal'])]:min-w-[1.5em] [&_[data-segment]:not([data-segment='literal'])]:text-center [&_[data-segment]:not([data-segment='literal'])]:focus:bg-su-primary/10 [&_[data-segment]:not([data-segment='literal'])]:focus:text-su-primary [&_[data-segment]:not([data-segment='literal'])]:focus:outline-none [&_[data-segment='literal']]:text-su-muted-foreground";

    private string datePickerTriggerClasses = "p-1 rounded hover:bg-su-accent text-su-muted-foreground hover:text-su-foreground focus:outline-none focus:ring-2 focus:ring-su-primary/20 disabled:opacity-50 disabled:cursor-not-allowed";

    private string datePickerContentClasses = "p-4 bg-su-card border border-su-border rounded-xl shadow-lg data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 duration-150";

    private string calendarNavButtonClasses = "p-1.5 rounded-lg hover:bg-su-accent text-su-muted-foreground hover:text-su-foreground focus:outline-none focus:ring-2 focus:ring-su-primary/20 disabled:opacity-50 disabled:cursor-not-allowed";

    private string calendarDayClasses = "w-9 h-9 rounded-lg text-sm font-medium border-0 bg-transparent cursor-pointer transition-colors hover:bg-su-accent hover:text-su-accent-foreground focus:outline-none focus:ring-2 focus:ring-su-primary/20 data-[today]:font-bold data-[today]:text-su-primary data-[state=selected]:bg-su-primary data-[state=selected]:text-su-primary-foreground data-[outside-month]:text-su-muted-foreground/50 data-[unavailable]:text-su-muted-foreground/30 data-[unavailable]:cursor-not-allowed disabled:text-su-muted-foreground/30 disabled:cursor-not-allowed";

    private record SubComponent(string Name, string Description);

    private readonly List<SubComponent> subComponents = new()
    {
        new("DatePickerRoot", "Root container managing state and cascading context."),
        new("DatePickerField", "Groups label, input segments, and trigger button."),
        new("DatePickerLabel", "Accessible label for the date picker."),
        new("DatePickerInput", "Container that renders date segments."),
        new("DatePickerSegment", "Individual editable segment (auto-generated)."),
        new("DatePickerTrigger", "Button that opens the calendar popover."),
        new("DatePickerPortal", "Renders calendar in a portal container."),
        new("DatePickerContent", "Floating popover containing the calendar."),
        new("DatePickerCalendar", "Calendar grid for date selection."),
        new("DatePickerCalendarHeader", "Header containing navigation and heading."),
        new("DatePickerCalendarHeading", "Displays current month and year."),
        new("DatePickerCalendarPrevButton", "Navigate to previous month."),
        new("DatePickerCalendarNextButton", "Navigate to next month."),
        new("DatePickerCalendarGrid", "The calendar table element."),
        new("DatePickerCalendarGridHead", "Weekday header row container."),
        new("DatePickerCalendarGridBody", "Date rows container."),
        new("DatePickerCalendarGridRow", "Row in the calendar grid."),
        new("DatePickerCalendarHeadCell", "Weekday header cell."),
        new("DatePickerCalendarCell", "Container for a day button."),
        new("DatePickerCalendarDay", "Selectable day button.")
    };

    private readonly List<SuApiProperty> rootProps = new()
    {
        new() { Name = "Value", Type = "DateOnly?", Default = "null", Description = "Controlled selected date value" },
        new() { Name = "DefaultValue", Type = "DateOnly?", Default = "null", Description = "Default value (uncontrolled)" },
        new() { Name = "ValueChanged", Type = "EventCallback<DateOnly?>", Description = "Value change callback" },
        new() { Name = "Placeholder", Type = "DateOnly?", Default = "Today", Description = "Placeholder date for initial calendar display" },
        new() { Name = "Open", Type = "bool?", Default = "null", Description = "Controlled open state" },
        new() { Name = "DefaultOpen", Type = "bool", Default = "false", Description = "Default open state" },
        new() { Name = "OpenChanged", Type = "EventCallback<bool>", Description = "Open state change callback" },
        new() { Name = "CloseOnSelect", Type = "bool", Default = "true", Description = "Close popover when date is selected" },
        new() { Name = "Modal", Type = "bool", Default = "true", Description = "Trap focus within popover when open" },
        new() { Name = "Format", Type = "string?", Default = "auto", Description = "Date format pattern (e.g., \"yyyy-MM-dd\")" },
        new() { Name = "CalendarSystem", Type = "CalendarSystem", Default = "Gregorian", Description = "Calendar system for display" },
        new() { Name = "Locale", Type = "string?", Default = "auto", Description = "Locale for formatting (e.g., \"en-US\")" },
        new() { Name = "WeekStartsOn", Type = "WeekStartsOn?", Default = "auto", Description = "First day of the week" },
        new() { Name = "FixedWeeks", Type = "bool", Default = "false", Description = "Always display 6 weeks" },
        new() { Name = "MinValue", Type = "DateOnly?", Default = "null", Description = "Minimum selectable date" },
        new() { Name = "MaxValue", Type = "DateOnly?", Default = "null", Description = "Maximum selectable date" },
        new() { Name = "Disabled", Type = "bool", Default = "false", Description = "Disable the entire date picker" },
        new() { Name = "ReadOnly", Type = "bool", Default = "false", Description = "Make the field read-only" },
        new() { Name = "IsDateDisabled", Type = "Func<DateOnly, bool>?", Default = "null", Description = "Custom function to disable specific dates" },
        new() { Name = "Name", Type = "string?", Default = "null", Description = "Form field name for submission" },
        new() { Name = "Required", Type = "bool", Default = "false", Description = "Mark field as required" },
        new() { Name = "Invalid", Type = "bool", Default = "false", Description = "Validation error state" }
    };

    private readonly List<SuApiProperty> fieldProps = new()
    {
        new() { Name = "Value", Type = "DateOnly?", Default = "from Root", Description = "Override value from root" },
        new() { Name = "ValueChanged", Type = "EventCallback<DateOnly?>", Description = "Value change callback" },
        new() { Name = "Format", Type = "string?", Default = "from Root", Description = "Date format pattern" },
        new() { Name = "CalendarSystem", Type = "CalendarSystem", Default = "Gregorian", Description = "Calendar system for display" },
        new() { Name = "Locale", Type = "string?", Default = "from Root", Description = "Locale for formatting" },
        new() { Name = "MinValue", Type = "DateOnly?", Default = "null", Description = "Minimum allowed date" },
        new() { Name = "MaxValue", Type = "DateOnly?", Default = "null", Description = "Maximum allowed date" },
        new() { Name = "Disabled", Type = "bool", Default = "false", Description = "Disable the field" },
        new() { Name = "ReadOnly", Type = "bool", Default = "false", Description = "Make the field read-only" },
        new() { Name = "Invalid", Type = "bool", Default = "false", Description = "Validation error state" },
        new() { Name = "Name", Type = "string?", Default = "null", Description = "Form field name" },
        new() { Name = "Required", Type = "bool", Default = "false", Description = "Mark field as required" }
    };

    private readonly List<SuApiProperty> contentProps = new()
    {
        new() { Name = "As", Type = "string", Default = "\"div\"", Description = "HTML element to render" },
        new() { Name = "Side", Type = "Side", Default = "Bottom", Description = "Placement side" },
        new() { Name = "SideOffset", Type = "int", Default = "0", Description = "Offset from field (px)" },
        new() { Name = "Align", Type = "Align", Default = "Start", Description = "Alignment along side axis" },
        new() { Name = "AlignOffset", Type = "int", Default = "0", Description = "Alignment offset (px)" },
        new() { Name = "AvoidCollisions", Type = "bool", Default = "true", Description = "Avoid viewport boundaries" },
        new() { Name = "CollisionPadding", Type = "int", Default = "8", Description = "Viewport padding (px)" },
        new() { Name = "TrapFocus", Type = "bool?", Default = "from Modal", Description = "Trap focus within content" },
        new() { Name = "EscapeKeyBehavior", Type = "EscapeKeyBehavior", Default = "Close", Description = "Escape key behavior" },
        new() { Name = "OutsideClickBehavior", Type = "OutsideClickBehavior", Default = "Close", Description = "Outside click behavior" }
    };

    private readonly List<SuApiProperty> calendarProps = new()
    {
        new() { Name = "Value", Type = "DateOnly?", Default = "null", Description = "Selected date" },
        new() { Name = "ValueChanged", Type = "EventCallback<DateOnly?>", Description = "Value change callback" },
        new() { Name = "Placeholder", Type = "DateOnly?", Default = "Today", Description = "Initial displayed month" },
        new() { Name = "Locale", Type = "string?", Default = "auto", Description = "Locale for formatting" },
        new() { Name = "WeekStartsOn", Type = "WeekStartsOn?", Default = "auto", Description = "First day of the week" },
        new() { Name = "CalendarSystem", Type = "CalendarSystem", Default = "Gregorian", Description = "Calendar system" },
        new() { Name = "FixedWeeks", Type = "bool", Default = "false", Description = "Always show 6 weeks" },
        new() { Name = "MinValue", Type = "DateOnly?", Default = "null", Description = "Minimum selectable date" },
        new() { Name = "MaxValue", Type = "DateOnly?", Default = "null", Description = "Maximum selectable date" },
        new() { Name = "IsDateDisabled", Type = "Func<DateOnly, bool>?", Default = "null", Description = "Custom disable function" },
        new() { Name = "Disabled", Type = "bool", Default = "false", Description = "Disable the calendar" },
        new() { Name = "ReadOnly", Type = "bool", Default = "false", Description = "Make calendar read-only" }
    };

    private readonly List<SuApiProperty> dataAttributes = new()
    {
        new() { Name = "data-state", Type = "\"open\" | \"closed\"", Description = "Popover open state (on root, content)" },
        new() { Name = "data-state", Type = "\"selected\"", Description = "Selected day in calendar" },
        new() { Name = "data-disabled", Type = "Present when disabled", Description = "Element is disabled" },
        new() { Name = "data-readonly", Type = "Present when read-only", Description = "Element is read-only" },
        new() { Name = "data-invalid", Type = "Present when invalid", Description = "Validation error state" },
        new() { Name = "data-today", Type = "Present on today", Description = "Calendar day is today" },
        new() { Name = "data-focused", Type = "Present when focused", Description = "Calendar day has keyboard focus" },
        new() { Name = "data-outside-month", Type = "Present", Description = "Day is outside current month" },
        new() { Name = "data-unavailable", Type = "Present", Description = "Day is outside min/max range" },
        new() { Name = "data-segment", Type = "Segment type", Description = "Identifies segment type" },
        new() { Name = "data-placeholder", Type = "Present when no value", Description = "Showing placeholder" }
    };

    private readonly List<SuApiProperty> segmentKeyboardNavigation = new()
    {
        new() { Name = "ArrowUp", Description = "Increment the focused segment value", Type = "" },
        new() { Name = "ArrowDown", Description = "Decrement the focused segment value", Type = "" },
        new() { Name = "ArrowLeft", Description = "Move focus to previous segment", Type = "" },
        new() { Name = "ArrowRight", Description = "Move focus to next segment", Type = "" },
        new() { Name = "Tab", Description = "Move focus to next segment (or next element)", Type = "" },
        new() { Name = "0-9", Description = "Type numeric value directly into segment", Type = "" },
        new() { Name = "Backspace / Delete", Description = "Clear the value (sets to null)", Type = "" }
    };

    private readonly List<SuApiProperty> calendarKeyboardNavigation = new()
    {
        new() { Name = "ArrowUp", Description = "Move focus to same day in previous week", Type = "" },
        new() { Name = "ArrowDown", Description = "Move focus to same day in next week", Type = "" },
        new() { Name = "ArrowLeft", Description = "Move focus to previous day", Type = "" },
        new() { Name = "ArrowRight", Description = "Move focus to next day", Type = "" },
        new() { Name = "Enter / Space", Description = "Select the focused date", Type = "" },
        new() { Name = "Home", Description = "Move focus to first day of week", Type = "" },
        new() { Name = "End", Description = "Move focus to last day of week", Type = "" },
        new() { Name = "PageUp", Description = "Move focus to same day in previous month", Type = "" },
        new() { Name = "PageDown", Description = "Move focus to same day in next month", Type = "" },
        new() { Name = "Escape", Description = "Close the calendar popover", Type = "" }
    };

    private const string anatomyCode = @"<DatePickerRoot @bind-Value=""date"" Format=""yyyy-MM-dd"">
    <DatePickerField>
        <DatePickerLabel>Select a date</DatePickerLabel>
        <DatePickerInput />
        <DatePickerTrigger>Open</DatePickerTrigger>
    </DatePickerField>
    <DatePickerPortal>
        <DatePickerContent>
            <DatePickerCalendar @bind-Value=""date"" Context=""cal"">
                <DatePickerCalendarHeader>
                    <DatePickerCalendarPrevButton>Prev</DatePickerCalendarPrevButton>
                    <DatePickerCalendarHeading />
                    <DatePickerCalendarNextButton>Next</DatePickerCalendarNextButton>
                </DatePickerCalendarHeader>
                <DatePickerCalendarGrid>
                    <DatePickerCalendarGridHead>
                        <DatePickerCalendarGridRow>
                            @for (int i = 0; i < cal.Weekdays.Length; i++)
                            {
                                var idx = i;
                                <DatePickerCalendarHeadCell Abbreviation=""@cal.WeekdaysLong[idx]"">
                                    @cal.Weekdays[idx]
                                </DatePickerCalendarHeadCell>
                            }
                        </DatePickerCalendarGridRow>
                    </DatePickerCalendarGridHead>
                    <DatePickerCalendarGridBody>
                        @foreach (var week in cal.CurrentMonth.Weeks)
                        {
                            <DatePickerCalendarGridRow>
                                @foreach (var date in week)
                                {
                                    <DatePickerCalendarCell Date=""@date"">
                                        <DatePickerCalendarDay />
                                    </DatePickerCalendarCell>
                                }
                            </DatePickerCalendarGridRow>
                        }
                    </DatePickerCalendarGridBody>
                </DatePickerCalendarGrid>
            </DatePickerCalendar>
        </DatePickerContent>
    </DatePickerPortal>
</DatePickerRoot>";

    private const string calendarSystemEnumCode = @"public enum CalendarSystem
{
    Gregorian,     // Default Western calendar
    Persian,       // Solar Hijri (Iran, Afghanistan)
    Islamic,       // Hijri (Islamic lunar calendar)
    IslamicCivil,  // Islamic civil calendar
    Hebrew,        // Jewish calendar
    Buddhist,      // Thai Buddhist calendar
    Japanese,      // Japanese Imperial calendar
    Chinese,       // Chinese lunar calendar
    Coptic,        // Coptic calendar (Egypt)
    Ethiopian,     // Ethiopian calendar
    Indian         // Indian National calendar
}";

    private const string weekStartsOnEnumCode = @"public enum WeekStartsOn
{
    Sunday = 0,
    Monday = 1,
    Tuesday = 2,
    Wednesday = 3,
    Thursday = 4,
    Friday = 5,
    Saturday = 6
}";

    private const string basicExampleCode = @"@code {
    private DateOnly? selectedDate = DateOnly.FromDateTime(DateTime.Today);
}

<DatePickerRoot @bind-Value=""selectedDate"" Format=""yyyy-MM-dd"">
    <DatePickerField class=""datepicker-field"">
        <DatePickerLabel>Select a date</DatePickerLabel>
        <DatePickerInput />
        <DatePickerTrigger>Calendar</DatePickerTrigger>
    </DatePickerField>
    <DatePickerPortal>
        <DatePickerContent class=""datepicker-content"">
            <DatePickerCalendar @bind-Value=""selectedDate"" Context=""cal"">
                <!-- Calendar structure as shown in anatomy -->
            </DatePickerCalendar>
        </DatePickerContent>
    </DatePickerPortal>
</DatePickerRoot>

<p>Selected: @(selectedDate?.ToString(""yyyy-MM-dd"") ?? ""None"")</p>";

    private const string minMaxExampleCode = @"@code {
    private DateOnly? date = null;
    private DateOnly minDate = DateOnly.FromDateTime(DateTime.Today);
    private DateOnly maxDate = DateOnly.FromDateTime(DateTime.Today.AddDays(30));
}

<DatePickerRoot @bind-Value=""date"" MinValue=""@minDate"" MaxValue=""@maxDate"">
    <DatePickerField MinValue=""@minDate"" MaxValue=""@maxDate"">
        <DatePickerLabel>Select a date (next 30 days)</DatePickerLabel>
        <DatePickerInput />
        <DatePickerTrigger>Pick</DatePickerTrigger>
    </DatePickerField>
    <DatePickerPortal>
        <DatePickerContent>
            <DatePickerCalendar @bind-Value=""date"" 
                                MinValue=""@minDate"" 
                                MaxValue=""@maxDate"" 
                                Context=""cal"">
                <!-- Calendar structure -->
            </DatePickerCalendar>
        </DatePickerContent>
    </DatePickerPortal>
</DatePickerRoot>";

    private const string editFormExampleCode = @"@code {
    public class FormModel
    {
        [Required(ErrorMessage = ""Birth date is required"")]
        public DateOnly? BirthDate { get; set; }
    }
    
    private FormModel model = new();
    private EditContext? editContext;
    private bool submitted;
    
    protected override void OnInitialized()
    {
        editContext = new EditContext(model);
    }
    
    private void HandleSubmit()
    {
        submitted = true;
        if (editContext!.Validate())
        {
            // Process form
        }
    }
}

<EditForm EditContext=""editContext"" OnSubmit=""HandleSubmit"">
    <DataAnnotationsValidator />
    
    <DatePickerRoot @bind-Value=""model.BirthDate"">
        <DatePickerField @bind-Value=""model.BirthDate""
                         Name=""birthDate""
                         Required=""true""
                         Invalid=""@(submitted && model.BirthDate == null)"">
            <DatePickerLabel>Birth Date</DatePickerLabel>
            <DatePickerInput />
            <DatePickerTrigger>Select</DatePickerTrigger>
        </DatePickerField>
        <DatePickerPortal>
            <DatePickerContent>
                <DatePickerCalendar @bind-Value=""model.BirthDate"" Context=""cal"">
                    <!-- Calendar structure -->
                </DatePickerCalendar>
            </DatePickerContent>
        </DatePickerPortal>
    </DatePickerRoot>
    <ValidationMessage For=""@(() => model.BirthDate)"" />
    
    <button type=""submit"">Submit</button>
</EditForm>";

    private const string controlledExampleCode = @"@code {
    private DateOnly? date = null;
    private bool isOpen = false;
}

<DatePickerRoot @bind-Value=""date"" @bind-Open=""isOpen"" CloseOnSelect=""false"">
    <DatePickerField>
        <DatePickerLabel>Select a date</DatePickerLabel>
        <DatePickerInput />
        <DatePickerTrigger>Open</DatePickerTrigger>
    </DatePickerField>
    <DatePickerPortal>
        <DatePickerContent OutsideClickBehavior=""OutsideClickBehavior.Ignore"">
            <DatePickerCalendar @bind-Value=""date"" Context=""cal"">
                <!-- Calendar structure -->
            </DatePickerCalendar>
            <button @onclick=""() => isOpen = false"">Done</button>
        </DatePickerContent>
    </DatePickerPortal>
</DatePickerRoot>

<p>Open: @isOpen</p>
<button @onclick=""() => isOpen = !isOpen"">Toggle Calendar</button>";

    private const string calendarSystemExampleCode = @"@code {
    private DateOnly? persianDate = DateOnly.FromDateTime(DateTime.Today);
}

<DatePickerRoot @bind-Value=""persianDate"" CalendarSystem=""CalendarSystem.Persian"" Locale=""fa-IR"">
    <DatePickerField CalendarSystem=""CalendarSystem.Persian"">
        <DatePickerLabel>Select a date (Persian calendar)</DatePickerLabel>
        <DatePickerInput />
        <DatePickerTrigger>Pick</DatePickerTrigger>
    </DatePickerField>
    <DatePickerPortal>
        <DatePickerContent>
            <DatePickerCalendar @bind-Value=""persianDate"" 
                                CalendarSystem=""CalendarSystem.Persian""
                                Locale=""fa-IR""
                                WeekStartsOn=""WeekStartsOn.Saturday""
                                Context=""cal"">
                <!-- Calendar structure -->
            </DatePickerCalendar>
        </DatePickerContent>
    </DatePickerPortal>
</DatePickerRoot>

<p>Gregorian: @(persianDate?.ToString(""yyyy-MM-dd"") ?? ""None"")</p>";

    private const string tailwindExampleCode = @"<!-- DatePickerField with Tailwind classes -->
<DatePickerField class=""inline-flex items-center gap-1 px-3 py-2 
    bg-su-background border border-su-border rounded-lg text-sm 
    focus-within:border-su-primary focus-within:ring-2 focus-within:ring-su-primary/20 
    group-data-[disabled]:opacity-50 group-data-[invalid]:border-su-destructive
    [&_[data-segment]:not([data-segment='literal'])]:px-1 
    [&_[data-segment]:not([data-segment='literal'])]:py-0.5 
    [&_[data-segment]:not([data-segment='literal'])]:rounded 
    [&_[data-segment]:not([data-segment='literal'])]:focus:bg-su-primary/10"">
    ...
</DatePickerField>

<!-- DatePickerContent with animations -->
<DatePickerContent class=""p-4 bg-su-card border border-su-border rounded-xl shadow-lg 
    data-[state=open]:animate-in data-[state=open]:fade-in-0 data-[state=open]:zoom-in-95 
    data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95"">
    ...
</DatePickerContent>

<!-- Calendar day button -->
<DatePickerCalendarDay class=""w-9 h-9 rounded-lg text-sm font-medium 
    border-0 bg-transparent cursor-pointer transition-colors 
    hover:bg-su-accent data-[today]:font-bold data-[today]:text-su-primary 
    data-[state=selected]:bg-su-primary data-[state=selected]:text-su-primary-foreground 
    data-[outside-month]:text-su-muted-foreground/50 
    data-[unavailable]:cursor-not-allowed"" />";
}
