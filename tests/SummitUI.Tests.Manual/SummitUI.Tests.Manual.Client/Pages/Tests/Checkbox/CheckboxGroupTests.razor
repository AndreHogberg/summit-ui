@page "/tests/checkbox/group"
@rendermode InteractiveWebAssembly

@if (!RendererInfo.IsInteractive)
{
    <div data-testid="page-loading">Loading...</div>
}
else
{
<div data-testid="page-ready">
    <h1>Checkbox Group Tests</h1>

    <!-- Basic checkbox group -->
    <section data-testid="basic-group-section">
        <SmCheckboxGroup DefaultValues="@defaultGroupValues" OnValueChange="@HandleGroupChange" data-testid="basic-group">
            <SmCheckboxGroupLabel class="group-label" data-testid="group-label">Select Features</SmCheckboxGroupLabel>

            <div style="display: flex; flex-direction: column; gap: 0.5rem; margin-top: 0.5rem;">
                <label class="checkbox-label">
                    <SmCheckboxRoot Value="feature-1" class="checkbox-root" data-testid="feature-1-checkbox">
                        <SmCheckboxIndicator>
                            <span>✓</span>
                        </SmCheckboxIndicator>
                    </SmCheckboxRoot>
                    Feature 1
                </label>

                <label class="checkbox-label">
                    <SmCheckboxRoot Value="feature-2" class="checkbox-root" data-testid="feature-2-checkbox">
                        <SmCheckboxIndicator>
                            <span>✓</span>
                        </SmCheckboxIndicator>
                    </SmCheckboxRoot>
                    Feature 2
                </label>

                <label class="checkbox-label">
                    <SmCheckboxRoot Value="feature-3" class="checkbox-root" data-testid="feature-3-checkbox">
                        <SmCheckboxIndicator>
                            <span>✓</span>
                        </SmCheckboxIndicator>
                    </SmCheckboxRoot>
                    Feature 3
                </label>
            </div>
        </SmCheckboxGroup>

        <p style="margin-top: 0.5rem; font-size: 0.875rem;" data-testid="group-values">
            Selected: @string.Join(", ", groupValues)
        </p>
    </section>

    <!-- Disabled group -->
    <section style="margin-top: 2rem;" data-testid="disabled-group-section">
        <h2>Disabled Group</h2>
        <SmCheckboxGroup DefaultValues="@(["setting-1"])" Disabled="true" data-testid="disabled-group">
            <SmCheckboxGroupLabel class="group-label">Settings (Disabled)</SmCheckboxGroupLabel>

            <div style="display: flex; flex-direction: column; gap: 0.5rem; margin-top: 0.5rem;">
                <label class="checkbox-label">
                    <SmCheckboxRoot Value="setting-1" class="checkbox-root" data-testid="setting-1-checkbox">
                        <SmCheckboxIndicator>
                            <span>✓</span>
                        </SmCheckboxIndicator>
                    </SmCheckboxRoot>
                    Setting 1
                </label>

                <label class="checkbox-label">
                    <SmCheckboxRoot Value="setting-2" class="checkbox-root" data-testid="setting-2-checkbox">
                        <SmCheckboxIndicator>
                            <span>✓</span>
                        </SmCheckboxIndicator>
                    </SmCheckboxRoot>
                    Setting 2
                </label>
            </div>
        </SmCheckboxGroup>
    </section>
</div>
}

@code {
    private readonly IReadOnlyList<string> defaultGroupValues = ["feature-1", "feature-3"];
    private IReadOnlyList<string> groupValues = ["feature-1", "feature-3"];

    private void HandleGroupChange(IReadOnlyList<string> values)
    {
        groupValues = values;
    }
}

<style>
    section {
        padding: 1rem;
        border: 1px solid #eee;
        border-radius: 8px;
        background: #fafafa;
    }

    .checkbox-label {
        display: inline-flex;
        align-items: center;
        gap: 0.5rem;
        cursor: pointer;
    }

    .checkbox-label:has([data-disabled]) {
        opacity: 0.5;
        cursor: not-allowed;
    }

    .checkbox-root {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 20px;
        height: 20px;
        border: 2px solid #666;
        border-radius: 4px;
        background: white;
        cursor: pointer;
        font-size: 14px;
        padding: 0;
    }

    .checkbox-root[data-state="checked"] {
        background: #4f46e5;
        border-color: #4f46e5;
        color: white;
    }

    .checkbox-root[data-disabled] {
        cursor: not-allowed;
    }

    .group-label {
        font-weight: 600;
        display: block;
    }
</style>
