@page "/tests/combobox/disabled"
@rendermode InteractiveWebAssembly

@* 
    Test page for Combobox disabled states.
    Tests disabled root and disabled individual items.
*@

@if (!RendererInfo.IsInteractive)
{
    <div data-testid="page-loading">Loading...</div>
}
else
{
<div data-testid="page-ready">
    @* Combobox with disabled items *@
    <div style="margin-bottom: 2rem;">
        <h4>With Disabled Items</h4>
        <SmComboboxRoot TValue="string" @bind-Values="selectedValues1">
            <SmComboboxTrigger TValue="string" data-testid="trigger-disabled-items">
                <SmComboboxSelectedValues TValue="string" Context="items">
                    @foreach (var item in items)
                    {
                        <span class="badge">@item.Label</span>
                    }
                </SmComboboxSelectedValues>
                <SmComboboxInput TValue="string" Placeholder="Search..." data-testid="input-disabled-items" />
            </SmComboboxTrigger>
            <SmComboboxPortal TValue="string">
                <SmComboboxContent TValue="string" data-testid="content-disabled-items" SideOffset="4">
                    <SmComboboxViewport TValue="string">
                        <SmComboboxItem TValue="string" Value="@("apple")" Label="Apple" data-testid="item-apple">
                            Apple
                        </SmComboboxItem>
                        <SmComboboxItem TValue="string" Value="@("banana")" Label="Banana" Disabled="true" data-testid="item-banana-disabled">
                            Banana (Disabled)
                        </SmComboboxItem>
                        <SmComboboxItem TValue="string" Value="@("orange")" Label="Orange" data-testid="item-orange">
                            Orange
                        </SmComboboxItem>
                        <SmComboboxItem TValue="string" Value="@("grape")" Label="Grape" Disabled="true" data-testid="item-grape-disabled">
                            Grape (Disabled)
                        </SmComboboxItem>
                        <SmComboboxItem TValue="string" Value="@("mango")" Label="Mango" data-testid="item-mango">
                            Mango
                        </SmComboboxItem>
                    </SmComboboxViewport>
                </SmComboboxContent>
            </SmComboboxPortal>
        </SmComboboxRoot>
    </div>
    
    @* Fully disabled combobox *@
    <div>
        <h4>Fully Disabled</h4>
        <SmComboboxRoot TValue="string" @bind-Values="selectedValues2" Disabled="true">
            <SmComboboxTrigger TValue="string" data-testid="trigger-disabled">
                <SmComboboxSelectedValues TValue="string" Context="items">
                    @if (items.Count == 0)
                    {
                        <span data-placeholder>Select fruits...</span>
                    }
                </SmComboboxSelectedValues>
                <SmComboboxInput TValue="string" Placeholder="Search..." data-testid="input-disabled" />
            </SmComboboxTrigger>
            <SmComboboxPortal TValue="string">
                <SmComboboxContent TValue="string" data-testid="content-disabled" SideOffset="4">
                    <SmComboboxViewport TValue="string">
                        <SmComboboxItem TValue="string" Value="@("apple")" Label="Apple">Apple</SmComboboxItem>
                        <SmComboboxItem TValue="string" Value="@("banana")" Label="Banana">Banana</SmComboboxItem>
                    </SmComboboxViewport>
                </SmComboboxContent>
            </SmComboboxPortal>
        </SmComboboxRoot>
    </div>
</div>
}

@code {
    private IReadOnlyCollection<string> selectedValues1 = Array.Empty<string>();
    private IReadOnlyCollection<string> selectedValues2 = Array.Empty<string>();
}

<style>
    [data-summit-combobox-trigger] {
        display: flex;
        flex-wrap: wrap;
        align-items: center;
        gap: 0.25rem;
        min-width: 280px;
        padding: 0.5rem;
        background: white;
        border: 1px solid #ccc;
        border-radius: 6px;
        cursor: text;
    }
    
    [data-summit-combobox-trigger][data-disabled] {
        background: #f5f5f5;
        cursor: not-allowed;
        opacity: 0.6;
    }
    
    [data-summit-combobox-trigger]:focus-within {
        outline: 2px solid #0d6efd;
        outline-offset: 2px;
    }
    
    [data-summit-combobox-input] {
        flex: 1;
        min-width: 100px;
        border: none;
        outline: none;
        font-size: inherit;
        background: transparent;
    }
    
    [data-summit-combobox-content] {
        background: white;
        border: 1px solid #e0e0e0;
        border-radius: 8px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        min-width: 280px;
        padding: 0.25rem;
    }
    
    [data-summit-combobox-item] {
        padding: 0.5rem 0.75rem;
        border-radius: 4px;
        cursor: pointer;
    }
    
    [data-summit-combobox-item][data-highlighted] {
        background: #f0f0f0;
    }
    
    [data-summit-combobox-item][data-selected] {
        background: #e7f1ff;
    }
    
    [data-summit-combobox-item][data-disabled] {
        opacity: 0.5;
        cursor: not-allowed;
    }
    
    .badge {
        display: inline-flex;
        align-items: center;
        gap: 0.25rem;
        padding: 0.125rem 0.375rem;
        background: #e7f1ff;
        border-radius: 4px;
        font-size: 0.875rem;
    }
    
    [data-placeholder] {
        color: #999;
    }
</style>
