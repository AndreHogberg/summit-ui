@page "/tests/dropdown-menu/basic"
@rendermode InteractiveWebAssembly

@if (!RendererInfo.IsInteractive)
{
    <div data-testid="page-loading">Loading...</div>
}
else
{
<div data-testid="page-ready">
    <h1>Dropdown Menu Basic Tests</h1>
    
    <div class="test-section">
        <h2>Uncontrolled Menu</h2>
        <SmDropdownMenuRoot>
            <SmDropdownMenuTrigger class="menu-trigger" data-testid="basic-trigger">
                Open Menu
            </SmDropdownMenuTrigger>
            <SmDropdownMenuPortal>
                <SmDropdownMenuContent class="menu-content" data-testid="basic-content">
                    <SmDropdownMenuItem class="menu-item" data-testid="item-1">Item 1</SmDropdownMenuItem>
                    <SmDropdownMenuItem class="menu-item" data-testid="item-2">Item 2</SmDropdownMenuItem>
                    <SmDropdownMenuSeparator class="menu-separator" data-testid="basic-separator" />
                    <SmDropdownMenuItem class="menu-item" data-testid="item-3">Item 3</SmDropdownMenuItem>
                </SmDropdownMenuContent>
            </SmDropdownMenuPortal>
        </SmDropdownMenuRoot>
    </div>

    <div class="test-section">
        <h2>With Disabled Items</h2>
        <SmDropdownMenuRoot>
            <SmDropdownMenuTrigger class="menu-trigger" data-testid="disabled-trigger">
                With Disabled
            </SmDropdownMenuTrigger>
            <SmDropdownMenuPortal>
                <SmDropdownMenuContent class="menu-content" data-testid="disabled-content">
                    <SmDropdownMenuItem class="menu-item" data-testid="enabled-item-1">Available Action</SmDropdownMenuItem>
                    <SmDropdownMenuItem class="menu-item" Disabled="true" data-testid="disabled-item-1">Disabled Action</SmDropdownMenuItem>
                    <SmDropdownMenuItem class="menu-item" data-testid="enabled-item-2">Another Available</SmDropdownMenuItem>
                    <SmDropdownMenuItem class="menu-item" Disabled="true" data-testid="disabled-item-2">Disabled Action 2</SmDropdownMenuItem>
                </SmDropdownMenuContent>
            </SmDropdownMenuPortal>
        </SmDropdownMenuRoot>
    </div>

    <div class="test-section">
        <h2>Controlled Menu</h2>
        <SmDropdownMenuRoot @bind-Open="_isOpen">
            <SmDropdownMenuTrigger class="menu-trigger" data-testid="controlled-trigger">
                Controlled Menu
            </SmDropdownMenuTrigger>
            <SmDropdownMenuPortal>
                <SmDropdownMenuContent class="menu-content" data-testid="controlled-content">
                    <SmDropdownMenuItem class="menu-item" data-testid="controlled-item">Item</SmDropdownMenuItem>
                </SmDropdownMenuContent>
            </SmDropdownMenuPortal>
        </SmDropdownMenuRoot>
        <button type="button" @onclick="() => _isOpen = !_isOpen" data-testid="external-toggle">
            Toggle Externally
        </button>
    </div>
</div>
}

<style>
    .menu-trigger {
        padding: 8px 16px;
        border: 1px solid #ccc;
        background: #f0f0f0;
        cursor: pointer;
    }
    
    .menu-content {
        padding: 8px;
        border: 1px solid #ccc;
        background: white;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        border-radius: 4px;
        min-width: 160px;
        display: flex;
        flex-direction: column;
    }

    .menu-item {
        padding: 6px 12px;
        cursor: pointer;
        outline: none;
    }

    .menu-item:focus {
        background: #0078d4;
        color: white;
    }

    .menu-item[data-disabled] {
        color: #ccc;
        cursor: not-allowed;
    }

    .menu-separator {
        height: 1px;
        background: #eee;
        margin: 4px 0;
    }
    
    .test-section {
        margin-bottom: 2rem;
        padding: 1rem;
        border: 1px solid #eee;
    }
</style>

@code {
    private bool _isOpen;
}
