@page "/tests/date-field/calendar-systems"
@rendermode InteractiveWebAssembly

@if (!RendererInfo.IsInteractive)
{
    <div data-testid="page-loading">Loading...</div>
}
else
{
<div data-testid="page-ready">
    <h1>DateField Calendar System Tests</h1>
    
    <p>Gregorian Date: @(_date?.ToString("yyyy-MM-dd") ?? "None")</p>
    
    <div class="test-section" data-testid="gregorian-section">
        <h3>Gregorian Calendar (Default)</h3>
        <DateFieldRoot @bind-Value="_date" Format="yyyy-MM-dd" CalendarSystem="CalendarSystem.Gregorian">
            <DateFieldInput class="datefield-input" />
        </DateFieldRoot>
        <p data-testid="gregorian-value">Value: @(_date?.ToString("yyyy-MM-dd") ?? "None")</p>
    </div>

    <div class="test-section" data-testid="japanese-section">
        <h3>Japanese Calendar</h3>
        <p class="info">Shows Japanese era year (e.g., Reiwa 7 for 2025)</p>
        <DateFieldRoot @bind-Value="_date" Format="yyyy-MM-dd" CalendarSystem="CalendarSystem.Japanese">
            <DateFieldInput class="datefield-input" />
        </DateFieldRoot>
    </div>

    <div class="test-section" data-testid="buddhist-section">
        <h3>Buddhist Calendar</h3>
        <p class="info">Year = Gregorian + 543 (e.g., 2025 = 2568)</p>
        <DateFieldRoot @bind-Value="_date" Format="yyyy-MM-dd" CalendarSystem="CalendarSystem.Buddhist">
            <DateFieldInput class="datefield-input" />
        </DateFieldRoot>
    </div>

    <div class="test-section" data-testid="persian-section">
        <h3>Persian Calendar (Solar Hijri)</h3>
        <p class="info">2025-01-07 Gregorian = 1403-10-18 Persian</p>
        <DateFieldRoot @bind-Value="_date" Format="yyyy-MM-dd" CalendarSystem="CalendarSystem.Persian">
            <DateFieldInput class="datefield-input" />
        </DateFieldRoot>
    </div>

    <div class="test-section" data-testid="hebrew-section">
        <h3>Hebrew Calendar</h3>
        <p class="info">Has 12 or 13 months depending on leap year</p>
        <DateFieldRoot @bind-Value="_date" Format="yyyy-MM-dd" CalendarSystem="CalendarSystem.Hebrew">
            <DateFieldInput class="datefield-input" />
        </DateFieldRoot>
    </div>

    <div class="test-section" data-testid="islamic-section">
        <h3>Islamic Calendar (Umm al-Qura)</h3>
        <p class="info">2025-01-07 Gregorian is approximately 1446-07-07 Islamic</p>
        <DateFieldRoot @bind-Value="_date" Format="yyyy-MM-dd" CalendarSystem="CalendarSystem.IslamicUmalqura">
            <DateFieldInput class="datefield-input" />
        </DateFieldRoot>
    </div>

    <div class="test-section" data-testid="indian-section">
        <h3>Indian National Calendar (Saka)</h3>
        <p class="info">Year = Gregorian - 78 (starts in March)</p>
        <DateFieldRoot @bind-Value="_date" Format="yyyy-MM-dd" CalendarSystem="CalendarSystem.Indian">
            <DateFieldInput class="datefield-input" />
        </DateFieldRoot>
    </div>

    <div class="test-section" data-testid="ethiopic-section">
        <h3>Ethiopic Calendar</h3>
        <p class="info">About 7-8 years behind Gregorian</p>
        <DateFieldRoot @bind-Value="_date" Format="yyyy-MM-dd" CalendarSystem="CalendarSystem.Ethiopic">
            <DateFieldInput class="datefield-input" />
        </DateFieldRoot>
    </div>

    <div class="test-section" data-testid="auto-format-section">
        <h3>Auto-detect Format (no Format prop)</h3>
        <p class="info">Format should be detected from browser locale</p>
        <DateFieldRoot @bind-Value="_date" CalendarSystem="CalendarSystem.Gregorian">
            <DateFieldInput class="datefield-input" />
        </DateFieldRoot>
    </div>

    <div class="test-section" data-testid="locale-override-section">
        <h3>Explicit Locale (de-DE)</h3>
        <p class="info">Should use dd.MM.yyyy format</p>
        <DateFieldRoot @bind-Value="_date" Locale="de-DE">
            <DateFieldInput class="datefield-input" />
        </DateFieldRoot>
    </div>

    <div class="test-section" data-testid="datetime-calendar-section">
        <h3>DateTime with Calendar System (Persian)</h3>
        <DateFieldRoot @bind-DateTimeValue="_dateTime" CalendarSystem="CalendarSystem.Persian" TimeFormat="HH:mm">
            <DateFieldInput class="datefield-input" />
        </DateFieldRoot>
        <p data-testid="datetime-value">DateTime Value: @(_dateTime?.ToString("yyyy-MM-dd HH:mm") ?? "None")</p>
    </div>
</div>
}

<style>
    .datefield-input {
        display: inline-flex;
        padding: 4px 8px;
        border: 1px solid #ccc;
        background: white;
    }
    
    .datefield-input:focus-within {
        border-color: #0078d4;
        outline: 2px solid #0078d4;
    }

    .test-section {
        margin-bottom: 2rem;
        padding: 1rem;
        border: 1px solid #eee;
    }

    .info {
        font-size: 0.9em;
        color: #666;
        margin-bottom: 0.5rem;
    }
</style>

@code {
    private DateOnly? _date = new DateOnly(2025, 1, 7);
    private DateTime? _dateTime = new DateTime(2025, 1, 7, 14, 30, 0);
}
