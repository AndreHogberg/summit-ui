@page "/tests/popover/overlay"
@rendermode InteractiveWebAssembly

@if (!RendererInfo.IsInteractive)
{
    <div data-testid="page-loading">Loading...</div>
}
else
{
<div data-testid="page-ready">
    <h1>Popover Overlay & TrapFocus Tests</h1>
    
    <div class="test-section">
        <h2>Popover with Overlay (Modal/TrapFocus)</h2>
        <PopoverRoot>
            <PopoverTrigger class="popover-trigger" data-testid="overlay-trigger">
                Open with Overlay
            </PopoverTrigger>
            <PopoverPortal>
                <PopoverOverlay class="popover-overlay" data-testid="popover-overlay" />
                <PopoverContent class="popover-content" data-testid="overlay-content">
                    <h3>Modal Popover</h3>
                    <p>This popover should trap focus.</p>
                    <input type="text" placeholder="Focusable input" data-testid="overlay-input" />
                    <PopoverClose class="popover-close" data-testid="overlay-close">Close</PopoverClose>
                </PopoverContent>
            </PopoverPortal>
        </PopoverRoot>
    </div>

    <div class="test-section">
        <h2>Popover without TrapFocus</h2>
        <PopoverRoot Modal="false">
            <PopoverTrigger class="popover-trigger" data-testid="no-trap-trigger">
                Open No Trap
            </PopoverTrigger>
            <PopoverPortal>
                <PopoverContent class="popover-content" data-testid="no-trap-content">
                    <p>This popover should NOT trap focus.</p>
                    <PopoverClose class="popover-close" data-testid="no-trap-close">Close</PopoverClose>
                </PopoverContent>
            </PopoverPortal>
        </PopoverRoot>
    </div>
</div>
}

<style>
    .popover-trigger {
        padding: 8px 16px;
        border: 1px solid #ccc;
        background: #f0f0f0;
        cursor: pointer;
    }
    
    .popover-content {
        padding: 16px;
        border: 1px solid #ccc;
        background: white;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        border-radius: 4px;
        min-width: 200px;
        z-index: 50;
    }

    .popover-overlay {
        position: fixed;
        inset: 0;
        background: rgba(0,0,0,0.5);
        z-index: 40;
    }
    
    .test-section {
        margin-bottom: 2rem;
        padding: 1rem;
        border: 1px solid #eee;
    }
</style>
