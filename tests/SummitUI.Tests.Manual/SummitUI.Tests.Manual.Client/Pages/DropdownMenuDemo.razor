@page "/dropdown-menu"
@rendermode InteractiveWebAssembly

<h1>Dropdown Menu Component Demo</h1>

<section>
    <h2>Basic Dropdown Menu</h2>
    <p>A simple dropdown menu with default settings.</p>

    <SmDropdownMenuRoot>
        <SmDropdownMenuTrigger class="btn btn-primary">
            Open Menu
        </SmDropdownMenuTrigger>
        <SmDropdownMenuPortal>
            <SmDropdownMenuContent class="dropdown-menu-content" SideOffset="4">
                <SmDropdownMenuItem class="dropdown-menu-item" OnSelect="@(() => LogAction("New File"))">
                    New File
                </SmDropdownMenuItem>
                <SmDropdownMenuItem class="dropdown-menu-item" OnSelect="@(() => LogAction("New Folder"))">
                    New Folder
                </SmDropdownMenuItem>
                <SmDropdownMenuSeparator class="dropdown-menu-separator" />
                <SmDropdownMenuItem class="dropdown-menu-item" OnSelect="@(() => LogAction("Settings"))">
                    Settings
                </SmDropdownMenuItem>
            </SmDropdownMenuContent>
        </SmDropdownMenuPortal>
    </SmDropdownMenuRoot>

    @if (!string.IsNullOrEmpty(lastAction))
    {
        <p style="margin-top: 1rem; color: #666;">Last action: @lastAction</p>
    }
</section>

<section style="margin-top: 2rem;">
    <h2>Grouped Items</h2>
    <p>Menu items organized into labeled groups.</p>

    <SmDropdownMenuRoot>
        <SmDropdownMenuTrigger class="btn btn-success">
            Grouped Menu
        </SmDropdownMenuTrigger>
        <SmDropdownMenuPortal>
            <SmDropdownMenuContent class="dropdown-menu-content">
                <SmDropdownMenuGroup>
                    <SmDropdownMenuGroupLabel class="dropdown-menu-label">File</SmDropdownMenuGroupLabel>
                    <SmDropdownMenuItem class="dropdown-menu-item">New</SmDropdownMenuItem>
                    <SmDropdownMenuItem class="dropdown-menu-item">Open</SmDropdownMenuItem>
                    <SmDropdownMenuItem class="dropdown-menu-item">Save</SmDropdownMenuItem>
                </SmDropdownMenuGroup>
                <SmDropdownMenuSeparator class="dropdown-menu-separator" />
                <SmDropdownMenuGroup>
                    <SmDropdownMenuGroupLabel class="dropdown-menu-label">Edit</SmDropdownMenuGroupLabel>
                    <SmDropdownMenuItem OnClick="@(() => Console.WriteLine("Undo"))" class="dropdown-menu-item">Undo</SmDropdownMenuItem>
                    <SmDropdownMenuItem class="dropdown-menu-item">Redo</SmDropdownMenuItem>
                    <SmDropdownMenuItem class="dropdown-menu-item">Cut</SmDropdownMenuItem>
                    <SmDropdownMenuItem class="dropdown-menu-item">Copy</SmDropdownMenuItem>
                    <SmDropdownMenuItem class="dropdown-menu-item">Paste</SmDropdownMenuItem>
                </SmDropdownMenuGroup>
            </SmDropdownMenuContent>
        </SmDropdownMenuPortal>
    </SmDropdownMenuRoot>
</section>

<section style="margin-top: 2rem;">
    <h2>With Disabled Items</h2>
    <p>Some items can be disabled and skipped during keyboard navigation.</p>

    <SmDropdownMenuRoot>
        <SmDropdownMenuTrigger class="btn btn-secondary">
            With Disabled
        </SmDropdownMenuTrigger>
        <SmDropdownMenuPortal>
            <SmDropdownMenuContent class="dropdown-menu-content">
                <SmDropdownMenuItem class="dropdown-menu-item">Available Action</SmDropdownMenuItem>
                <SmDropdownMenuItem class="dropdown-menu-item" Disabled="true">Disabled Action</SmDropdownMenuItem>
                <SmDropdownMenuItem class="dropdown-menu-item">Another Available</SmDropdownMenuItem>
                <SmDropdownMenuItem class="dropdown-menu-item" Disabled="true">Also Disabled</SmDropdownMenuItem>
                <SmDropdownMenuItem class="dropdown-menu-item">Last Available</SmDropdownMenuItem>
            </SmDropdownMenuContent>
        </SmDropdownMenuPortal>
    </SmDropdownMenuRoot>
</section>

<section style="margin-top: 2rem;">
    <h2>Checkbox Items</h2>
    <p>Toggle-able menu items that maintain checked state.</p>

    <SmDropdownMenuRoot>
        <SmDropdownMenuTrigger class="btn btn-info">
            Settings Menu
        </SmDropdownMenuTrigger>
        <SmDropdownMenuPortal>
            <SmDropdownMenuContent class="dropdown-menu-content">
                <SmDropdownMenuGroupLabel class="dropdown-menu-label">Preferences</SmDropdownMenuGroupLabel>
                <SmDropdownMenuCheckboxItem class="dropdown-menu-checkbox-item" @bind-Checked="showToolbar">
                    <span class="checkbox-indicator">@(showToolbar ? "✓" : "")</span>
                    <span>Show Toolbar</span>
                </SmDropdownMenuCheckboxItem>
                <SmDropdownMenuCheckboxItem class="dropdown-menu-checkbox-item" @bind-Checked="showSidebar">
                    <span class="checkbox-indicator">@(showSidebar ? "✓" : "")</span>
                    <span>Show Sidebar</span>
                </SmDropdownMenuCheckboxItem>
                <SmDropdownMenuCheckboxItem class="dropdown-menu-checkbox-item" @bind-Checked="enableNotifications">
                    <span class="checkbox-indicator">@(enableNotifications ? "✓" : "")</span>
                    <span>Enable Notifications</span>
                </SmDropdownMenuCheckboxItem>
                <SmDropdownMenuSeparator class="dropdown-menu-separator" />
                <SmDropdownMenuItem class="dropdown-menu-item">More Settings...</SmDropdownMenuItem>
            </SmDropdownMenuContent>
        </SmDropdownMenuPortal>
    </SmDropdownMenuRoot>

    <p style="margin-top: 1rem; color: #666; font-size: 0.875rem;">
        Toolbar: @(showToolbar ? "On" : "Off") |
        Sidebar: @(showSidebar ? "On" : "Off") |
        Notifications: @(enableNotifications ? "On" : "Off")
    </p>
</section>

<section style="margin-top: 2rem;">
    <h2>Radio Items</h2>
    <p>Single-select items within a radio group.</p>

    <SmDropdownMenuRoot>
        <SmDropdownMenuTrigger class="btn btn-warning">
            Select Theme
        </SmDropdownMenuTrigger>
        <SmDropdownMenuPortal>
            <SmDropdownMenuContent class="dropdown-menu-content">
                <SmDropdownMenuRadioGroup @bind-Value="selectedTheme" AriaLabel="Theme selection">
                    <SmDropdownMenuGroupLabel class="dropdown-menu-label">Theme</SmDropdownMenuGroupLabel>
                    <SmDropdownMenuRadioItem class="dropdown-menu-radio-item" Value="light">
                        <span class="radio-indicator">@(selectedTheme == "light" ? "●" : "○")</span>
                        <span>Light</span>
                    </SmDropdownMenuRadioItem>
                    <SmDropdownMenuRadioItem class="dropdown-menu-radio-item" Value="dark">
                        <span class="radio-indicator">@(selectedTheme == "dark" ? "●" : "○")</span>
                        <span>Dark</span>
                    </SmDropdownMenuRadioItem>
                    <SmDropdownMenuRadioItem class="dropdown-menu-radio-item" Value="system">
                        <span class="radio-indicator">@(selectedTheme == "system" ? "●" : "○")</span>
                        <span>System</span>
                    </SmDropdownMenuRadioItem>
                </SmDropdownMenuRadioGroup>
            </SmDropdownMenuContent>
        </SmDropdownMenuPortal>
    </SmDropdownMenuRoot>

    <p style="margin-top: 1rem; color: #666; font-size: 0.875rem;">
        Selected theme: @selectedTheme
    </p>
</section>

<section style="margin-top: 2rem;">
    <h2>Different Placements</h2>
    <p>Dropdown menus can appear on different sides of the trigger.</p>

    <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
        <SmDropdownMenuRoot>
            <SmDropdownMenuTrigger class="btn btn-outline-primary">Bottom Start</SmDropdownMenuTrigger>
            <SmDropdownMenuPortal>
                <SmDropdownMenuContent class="dropdown-menu-content" Side="Side.Bottom" Align="Align.Start">
                    <SmDropdownMenuItem class="dropdown-menu-item">Item 1</SmDropdownMenuItem>
                    <SmDropdownMenuItem class="dropdown-menu-item">Item 2</SmDropdownMenuItem>
                    <SmDropdownMenuItem class="dropdown-menu-item">Item 3</SmDropdownMenuItem>
                </SmDropdownMenuContent>
            </SmDropdownMenuPortal>
        </SmDropdownMenuRoot>

        <SmDropdownMenuRoot>
            <SmDropdownMenuTrigger class="btn btn-outline-primary">Right Start</SmDropdownMenuTrigger>
            <SmDropdownMenuPortal>
                <SmDropdownMenuContent class="dropdown-menu-content" Side="Side.Right" Align="Align.Start">
                    <SmDropdownMenuItem class="dropdown-menu-item">Item 1</SmDropdownMenuItem>
                    <SmDropdownMenuItem class="dropdown-menu-item">Item 2</SmDropdownMenuItem>
                    <SmDropdownMenuItem class="dropdown-menu-item">Item 3</SmDropdownMenuItem>
                </SmDropdownMenuContent>
            </SmDropdownMenuPortal>
        </SmDropdownMenuRoot>

        <SmDropdownMenuRoot>
            <SmDropdownMenuTrigger class="btn btn-outline-primary">Top End</SmDropdownMenuTrigger>
            <SmDropdownMenuPortal>
                <SmDropdownMenuContent class="dropdown-menu-content" Side="Side.Top" Align="Align.End">
                    <SmDropdownMenuItem class="dropdown-menu-item">Item 1</SmDropdownMenuItem>
                    <SmDropdownMenuItem class="dropdown-menu-item">Item 2</SmDropdownMenuItem>
                    <SmDropdownMenuItem class="dropdown-menu-item">Item 3</SmDropdownMenuItem>
                </SmDropdownMenuContent>
            </SmDropdownMenuPortal>
        </SmDropdownMenuRoot>

        <SmDropdownMenuRoot>
            <SmDropdownMenuTrigger class="btn btn-outline-primary">Left Center</SmDropdownMenuTrigger>
            <SmDropdownMenuPortal>
                <SmDropdownMenuContent class="dropdown-menu-content" Side="Side.Left" Align="Align.Center">
                    <SmDropdownMenuItem class="dropdown-menu-item">Item 1</SmDropdownMenuItem>
                    <SmDropdownMenuItem class="dropdown-menu-item">Item 2</SmDropdownMenuItem>
                    <SmDropdownMenuItem class="dropdown-menu-item">Item 3</SmDropdownMenuItem>
                </SmDropdownMenuContent>
            </SmDropdownMenuPortal>
        </SmDropdownMenuRoot>
    </div>
</section>

<section style="margin-top: 2rem;">
    <h2>Controlled Mode</h2>
    <p>The dropdown menu state can be controlled externally.</p>

    <div style="margin-bottom: 1rem;">
        <button class="btn btn-info" @onclick="() => isControlledOpen = !isControlledOpen">
            Toggle Externally (@(isControlledOpen ? "Open" : "Closed"))
        </button>
    </div>

    <SmDropdownMenuRoot Open="@isControlledOpen" OpenChanged="@(v => isControlledOpen = v)">
        <SmDropdownMenuTrigger class="btn btn-secondary">
            Controlled Menu
        </SmDropdownMenuTrigger>
        <SmDropdownMenuPortal>
            <SmDropdownMenuContent class="dropdown-menu-content">
                <SmDropdownMenuItem class="dropdown-menu-item">Action 1</SmDropdownMenuItem>
                <SmDropdownMenuItem class="dropdown-menu-item">Action 2</SmDropdownMenuItem>
                <SmDropdownMenuItem class="dropdown-menu-item">Action 3</SmDropdownMenuItem>
            </SmDropdownMenuContent>
        </SmDropdownMenuPortal>
    </SmDropdownMenuRoot>
</section>

<section style="margin-top: 2rem;">
    <h2>Keyboard Navigation</h2>
    <p>Try these keyboard interactions:</p>
    <ul style="font-size: 0.875rem; color: #666;">
        <li><kbd>Enter</kbd> or <kbd>Space</kbd> - Open menu / select item</li>
        <li><kbd>Arrow Down</kbd> - Move to next item</li>
        <li><kbd>Arrow Up</kbd> - Move to previous item</li>
        <li><kbd>Home</kbd> - Move to first item</li>
        <li><kbd>End</kbd> - Move to last item</li>
        <li><kbd>Escape</kbd> - Close menu</li>
        <li>Type characters - Typeahead search</li>
    </ul>

    <SmDropdownMenuRoot>
        <SmDropdownMenuTrigger class="btn btn-primary">
            Try Keyboard Navigation
        </SmDropdownMenuTrigger>
        <SmDropdownMenuPortal>
            <SmDropdownMenuContent class="dropdown-menu-content">
                <SmDropdownMenuItem class="dropdown-menu-item" TextValue="Apple">Apple</SmDropdownMenuItem>
                <SmDropdownMenuItem class="dropdown-menu-item" TextValue="Banana">Banana</SmDropdownMenuItem>
                <SmDropdownMenuItem class="dropdown-menu-item" TextValue="Cherry">Cherry</SmDropdownMenuItem>
                <SmDropdownMenuItem class="dropdown-menu-item" TextValue="Date">Date</SmDropdownMenuItem>
                <SmDropdownMenuItem class="dropdown-menu-item" TextValue="Elderberry">Elderberry</SmDropdownMenuItem>
                <SmDropdownMenuItem class="dropdown-menu-item" TextValue="Fig">Fig</SmDropdownMenuItem>
                <SmDropdownMenuItem class="dropdown-menu-item" TextValue="Grape">Grape</SmDropdownMenuItem>
            </SmDropdownMenuContent>
        </SmDropdownMenuPortal>
    </SmDropdownMenuRoot>
</section>

<section style="margin-top: 2rem;">
    <h2>With Animations</h2>
    <p>Dropdown menu with CSS open/close animations. Tests that keyboard navigation works with animated content.</p>

    <SmDropdownMenuRoot>
        <SmDropdownMenuTrigger class="btn btn-primary">
            Animated Menu
        </SmDropdownMenuTrigger>
        <SmDropdownMenuPortal>
            <SmDropdownMenuContent class="dropdown-menu-content animated-content" SideOffset="4">
                <SmDropdownMenuItem class="dropdown-menu-item" TextValue="First">First Option</SmDropdownMenuItem>
                <SmDropdownMenuItem class="dropdown-menu-item" TextValue="Second">Second Option</SmDropdownMenuItem>
                <SmDropdownMenuItem class="dropdown-menu-item" TextValue="Third">Third Option</SmDropdownMenuItem>
            </SmDropdownMenuContent>
        </SmDropdownMenuPortal>
    </SmDropdownMenuRoot>
</section>

@code {
    private string lastAction = "";
    private bool isControlledOpen = false;
    private bool showToolbar = true;
    private bool showSidebar = true;
    private bool enableNotifications = false;
    private string? selectedTheme = "system";

    private void LogAction(string action)
    {
        lastAction = action;
    }
}

<style>
    .dropdown-menu-content {
        background: white;
        border-radius: 8px;
        box-shadow: 0 4px 20px rgba(0, 0, 0, 0.15);
        border: 1px solid #e0e0e0;
        min-width: 180px;
        padding: 4px;
    }

    .dropdown-menu-item,
    .dropdown-menu-checkbox-item,
    .dropdown-menu-radio-item {
        display: flex;
        align-items: center;
        padding: 8px 12px;
        border-radius: 4px;
        font-size: 0.875rem;
        cursor: pointer;
        outline: none;
        user-select: none;
    }

    .dropdown-menu-item[data-highlighted],
    .dropdown-menu-checkbox-item[data-highlighted],
    .dropdown-menu-radio-item[data-highlighted] {
        background: #f0f0f0;
    }

    .dropdown-menu-item[data-disabled],
    .dropdown-menu-checkbox-item[data-disabled],
    .dropdown-menu-radio-item[data-disabled] {
        color: #aaa;
        cursor: not-allowed;
    }

    .dropdown-menu-label {
        padding: 8px 12px 4px 12px;
        font-size: 0.75rem;
        font-weight: 600;
        color: #888;
        text-transform: uppercase;
        letter-spacing: 0.05em;
    }

    .dropdown-menu-separator {
        height: 1px;
        background: #e0e0e0;
        margin: 4px 0;
    }

    .checkbox-indicator,
    .radio-indicator {
        width: 20px;
        text-align: center;
        margin-right: 8px;
        font-size: 0.875rem;
    }

    section {
        padding: 1rem;
        border: 1px solid #eee;
        border-radius: 8px;
        background: #fafafa;
    }

    section h2 {
        margin-top: 0;
    }

    kbd {
        background: #eee;
        border: 1px solid #ccc;
        border-radius: 3px;
        padding: 2px 6px;
        font-size: 0.75rem;
        font-family: monospace;
    }
</style>
